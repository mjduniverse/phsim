(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=0)})([function(module,exports,__webpack_require__){"use strict";
/**
 * @author Mjduniverse
 * @copyright 2020 Mjduniverse 
 * @license
 *
 * Physics Simulator Class Library
 *
 * Copyright 2020 Mjduniverse.com
 * 
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy of this software 
 * and associated documentation files (the "Software"), to deal in the Software without restriction, 
 * including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, 
  * and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, 
 * subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all copies or substantial 
 * portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT 
 * LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. 
 * IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, 
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE 
  * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 */var Matter;if(typeof window==="object"){Matter=window.Matter}else{Matter=__webpack_require__(1)}function PhSim(dynSimOptions=new PhSim.Static){if(dynSimOptions){Object.assign(this,dynSimOptions)}PhSim.Static.call(this);if(Array.isArray(dynSimOptions.simulations)){this.simulations=dynSimOptions.simulations}else if(Array.isArray(dynSimOptions.layers)){this.simulations[0]=dynSimOptions}else if(Array.isArray(dynSimOptions.objUniverse)){this.simulations[0].layers[0]=dynSimOptions}else if(Array.isArray(dynSimOptions)){this.simulations[0].layers[0].objUniverse=[]}if(typeof dynSimOptions.wFunctions==="object"){this.wFunctions=dynSimOptions.wFunctions}if(!dynSimOptions.noUse){Matter.use(PhSim.matterPlugin)}this.options=dynSimOptions;this.debugging=this.debugging||{logMouseMovePerformance:true};this.debuggingData={};if(dynSimOptions.canvas){this.connectCanvas(dynSimOptions.canvas)}else{var newCanvas=document.createElement("canvas");this.connectCanvas(newCanvas)}if(dynSimOptions.container){this.connectContainer(dynSimOptions.container)}else{var newContainer=document.createElement("div");this.connectContainer(newContainer)}this.registerKeyEvents();if(dynSimOptions.initSimIndex){this.gotoSimulationIndex(dynSimOptions.initSimIndex)}else{this.gotoSimulationIndex(0)}}PhSim.prototype.connectCanvas=function(canvas){this.canvas=canvas;this.ctx=canvas.getContext("2d");this.canvas.width=this.box.w||this.box.width;this.canvas.height=this.box.h||this.box.height;this.registerCanvasEvents();this.configRender(this.ctx)};PhSim.prototype.connectContainer=function(c){this.container=c;c.appendChild(this.canvas);c.classList.add("phsim-container");this.configFilter(c)};PhSim.prototype.delta=50/3;PhSim.prototype.init=false;PhSim.prototype.sl_time=0;PhSim.prototype.simulationIndex=0;PhSim.statusCodes={INT:0,LOADED_DYN_OBJECTS:1,LOADED_SPRITES:2,LOADED_AUDIO:3,LOADED_SIMULATION:4};PhSim.prototype.status=0;PhSim.prototype.mouseX=null;PhSim.prototype.mouseY=null;PhSim.prototype.sim=null;PhSim.prototype.simulation=null;PhSim.prototype.paused=true;PhSim.prototype.matterJSWorld=null;PhSim.prototype.matterJSEngine=null;PhSim.prototype.dynTree=[];PhSim.prototype.objUniverse=[];PhSim.prototype.staticSprites=[];PhSim.prototype.staticAudio=[];PhSim.prototype.audioPlayers=0;PhSim.prototype.classes={};PhSim.prototype.bgFillStyle="white";PhSim.version="0.1.0-alpha";PhSim.prototype.loading={bgClr:"black",txtClr:"white",txtFace:"arial",txtAlign:"center",txt:"Loading...",yPos:"center",txtSize:20};PhSim.prototype.drawLoadingScreen=function(){this.ctx.fillStyle=this.loading.bgClr;this.ctx.fillRect(0,0,this.camera.scale,this.canvas.height);this.ctx.fillStyle=this.loading.txtClr;this.ctx.textAlign=this.loading.txtAlign;this.ctx.font=this.loading.txtSize+"px "+this.loading.txtFace;this.ctx.fillText(this.loading.txt,this.canvas.width/2,this.canvas.height/2)};if(typeof window==="object"){window.PhSim=PhSim}if(true){module.exports=PhSim}PhSim.Static=__webpack_require__(5);__webpack_require__(14);PhSim.EventStack=__webpack_require__(9);PhSim.prototype.eventStack=new PhSim.EventStack;PhSim.prototype.simulationEventStack=new PhSim.EventStack;PhSim.PhRender=__webpack_require__(15);PhSim.Sprites=__webpack_require__(16);PhSim.Audio=__webpack_require__(17);PhSim.Vector=__webpack_require__(3);PhSim.diagRect=__webpack_require__(12);PhSim.Vertices=__webpack_require__(6);PhSim.Centroid=__webpack_require__(7);PhSim.BoundingBox=__webpack_require__(11);PhSim.DynObject=__webpack_require__(2);PhSim.Events=__webpack_require__(18);__webpack_require__(19);__webpack_require__(20);__webpack_require__(21);__webpack_require__(22);__webpack_require__(23);__webpack_require__(24);PhSim.PhSimEventTarget=__webpack_require__(8);Object.assign(PhSim.prototype,PhSim.PhSimEventTarget);__webpack_require__(25);__webpack_require__(26);__webpack_require__(27);PhSim.prototype.gotoSimulationIndex=__webpack_require__(28);PhSim.Motion=__webpack_require__(4);__webpack_require__(29);__webpack_require__(30);__webpack_require__(31);PhSim.Camera=__webpack_require__(32);PhSim.Game=__webpack_require__(13);PhSim.Gradients=__webpack_require__(10);__webpack_require__(33);PhSim.calc_skinmesh=__webpack_require__(50);__webpack_require__(51);__webpack_require__(52);PhSim.ObjLoops=__webpack_require__(53);PhSim.prototype.eventStack=new PhSim.EventStack;PhSim.prototype.simulationEventStack=new PhSim.EventStack;PhSim.statusStruct={0:"Unloaded",1:"Initalized",2:"Loaded Images",3:"Loaded Audio",4:"Loaded Simulation"}},function(module,exports){module.exports=require("matter-js")},function(module,exports,__webpack_require__){const Static=__webpack_require__(5);const PhSim=__webpack_require__(0);const Vertices=__webpack_require__(6);const PhSimEventTarget=__webpack_require__(8);const EventStack=__webpack_require__(9);var Matter;if(typeof window==="object"){Matter=window.Matter}else{Matter=__webpack_require__(1)}var DynObject=function(staticObject,matterBody){Object.assign(this,PhSimEventTarget);Object.assign(this,PhSim.Query.deepClone(staticObject));this.name=staticObject.name;this.type=staticObject.type;if(this.type==="circle"){Static.Circle.apply(this,staticObject.x,staticObject.y,staticObject.r)}if(this.type==="regPolygon"){Static.RegPolygon.apply(this,staticObject.x,staticObject.y,staticObject.radius,staticObject.sides)}if(this.type==="rectangle"){Static.Rectangle.apply(this,staticObject.x,staticObject.y,staticObject.w,staticObject.h)}if(this.type==="polygon"){Static.Polygon.apply(this,staticObject.verts)}this.widgets=staticObject.widgets;this.matter=matterBody||PhSim.DynObject.createMatterObject(staticObject);if(staticObject.shape==="polygon"){this.skinmesh=JSON.parse(JSON.stringify(staticObject.verts))}this.firstCycle=staticObject.cycle||0;if(staticObject.shape==="composite"){this.flattenedParts=DynObject.flattenComposite()}this.static=staticObject;this.id=DynObject.nextId;DynObject.nextId++;this.data=this.data||{};this.phSim;this.noCollision=staticObject.noCollision||false;this.eventStack=new EventStack;this.matter.plugin.dynObject=this;if(DynObject.keepInstances){DynObject.instances.push(this)}};DynObject.keepInstances=false;DynObject.deepCloneStaticObject=false;DynObject.instances=[];DynObject.setColor=function(dyn_object,colorStr){dyn_object.fillStyle=colorStr};DynObject.prototype.setColor=function(colorStr){return DynObject.setColor(this,colorStr)};DynObject.setBorderColor=function(dyn_object,colorStr){dyn_object.strokeStyle=colorStr};DynObject.prototype.setBorderColor=function(colorStr){return DynObject.setBorderColor(this,colorStr)};DynObject.setLineWidth=function(dyn_object,lineWidth){dyn_object.lineWidth=lineWidth};DynObject.flattenComposite=function(composite){var a=[];var __f=function(composite){for(var i=0;i<composite.parts.length;i++){if(composite.parts[i].shape==="composite"){DynObject.flattenComposite(composite.parts[i].shape==="composite")}else{a.push(composite.parts[i])}}};__f(composite);return a};DynObject.createPath=function(vectorSet,options){var o=new Static.Polygon(vectorSet);Object.assign(o,options);return new DynObject(o)};DynObject.createCircle=function(x,y,r,options={}){var o=new Static.Circle(x,y,r);Object.assign(o,options);return new DynObject(o)};DynObject.createRectangle=function(x,y,w,h,options={}){var o=new Static.Rectangle(x,y,w,h);Object.assign(o,options)};DynObject.createRegPolygon=function(x,y,r,n,options={}){var o=new Static.RegPolygon(x,y,r,n);Object.assign(o,options);return new DynObject(o)};DynObject.createMatterObject=function(staticObject){var opts=staticObject.matter||{};opts.label=staticObject.name||"Untitled Object";opts.isStatic=staticObject.locked||staticObject.semiLocked;var set;if(typeof staticObject.density==="number"){opts.density=staticObject.density}else{opts.density=.001}if(typeof staticObject.mass==="number"){opts.mass=staticObject.mass;opts.inverseMass=1/staticObject.mass}if(typeof staticObject.airFriction==="number"){opts.airFriction=staticObject.airFriction}if(Number.isInteger(staticObject.collisionNum)){opts.collisionFilter=staticObject.collisionNum}if(staticObject.shape==="polygon"){return Matter.Bodies.fromVertices(Matter.Vertices.centre(staticObject.verts).x,Matter.Vertices.centre(staticObject.verts).y,staticObject.verts,opts)}else if(staticObject.shape==="circle"){return Matter.Bodies.circle(staticObject.x,staticObject.y,staticObject.radius,opts)}else if(staticObject.shape==="rectangle"){set=Vertices.rectangle(staticObject);return Matter.Bodies.fromVertices(Matter.Vertices.centre(set).x,Matter.Vertices.centre(set).y,set,opts)}else if(staticObject.shape==="regPolygon"){set=Vertices.regPolygon(staticObject);return Matter.Bodies.fromVertices(Matter.Vertices.centre(set).x,Matter.Vertices.centre(set).y,set,opts)}};DynObject.nextId=0;module.exports=DynObject},function(module,exports){var Vector=function(x,y){this.x;this.y;if(typeof x==="number"){this.x=x}else{console.trace();throw"Expecting a number in argument 1"}if(typeof y==="number"){this.y=y}else{console.trace();throw"Expecting a number in argument 2"}};Vector.add=function(vector1,vector2,newObj=true){if(newObj){return new Vector(vector1.x+vector2.x,vector1.y+vector2.y)}else{vector1.x=vector1.x+vector2.x;vector1.y=vector1.y+vector2.y;return vector1}};Vector.subtract=function(vector1,vector2,newObj=true){if(newObj){return new Vector(vector1.x-vector2.x,vector1.y-vector2.y)}else{vector1.x=vector1.x-vector2.x;vector1.y=vector1.y-vector2.y;return vector1}};Vector.scale=function(vector,scalar){return new Vector(vector.x*scalar,vector.y*scalar)};Vector.divide=function(vector,scalar){return new Vector(vector.x*(1/scalar),vector.y*(1/scalar))};Vector.distance=function(vector1,vector2){var l1=Math.pow(vector1.x-vector2.x,2);var l2=Math.pow(vector1.y-vector2.y,2);return Math.sqrt(l1+l2)};Vector.getLength=function(vector){return Math.sqrt(Math.pow(vector.x,2)+Math.pow(vector.y,2))};Vector.unitVector=function(vector){return Vector.scale(vector,1/Vector.getLength(vector))};Vector.applyTransformation=function(a11,a12,a21,a22,x,y){return new Vector(a11*x+a12*y,a21*x+a22*y)};Vector.rotate=function(x,y,a){return Vector.applyTransformation(Math.cos(a),Math.sin(a),-Math.cos(a),Math.sin(a),x,y)};Vector.svgVector=function(x,y){return x+","+y};Vector.dotProduct=function(vector1,vector2){return vector1.x*vector2.x+vector1.y*vector2.y};Vector.vectorToArray=function(vertex,ray1,ray2){ray1.x=ray1.x-vertex.x;ray1.y=ray1.y-vertex.y;ray2.x=ray2.x-vertex.x;ray2.y=ray2.y-vertex.y;return Math.acos(Vector.dotProduct(ray1,ray2))};module.exports=Vector},function(module,exports,__webpack_require__){const DynObject=__webpack_require__(2);const Centroid=__webpack_require__(7);var Matter;if(typeof window==="object"){Matter=window.Matter}else{Matter=__webpack_require__(1)}var Motion={};Motion.applyForce=function(dynObject,position,forceVector){if(!dynObject.locked&&!dynObject.noDyn){return Matter.Body.applyForce(dynObject.matter,position,forceVector)}};Motion.setVelocity=function(dynObject,velocityVector){if(!dynObject.locked){return Matter.Body.setVelocity(dynObject.matter,velocityVector)}};Motion.translate=function(o,translationVector){if(!o.locked){if(o.shape==="polygon"){for(let i=0;i<o.verts.length;i++){o.verts[i].x=o.verts[i].x+translationVector.x;o.verts[i].y=o.verts[i].y+translationVector.y}}if(o.shape==="circle"||o.shape==="rectangle"||o.shape==="regPolygon"){o.x=o.x+translationVector.x;o.y=o.y+translationVector.y}if(o instanceof DynObject){return Matter.Body.translate(o.matter,translationVector)}}};Motion.setPosition=function(o,position){var c;if(!o.locked){if(o.type==="circle"||o.type==="regPolygon"){o.x=position.x;o.y=position.y}if(o.shape==="rectangle"){c=Centroid.rectangle(o);o.x=o.x-c.x+position.x;o.y=o.y-c.y+position.y}if(o.shape==="polygon"){c=Centroid.polygon(o);for(var i=0;i<o.verts.length;i++){o.verts[i].x=o.verts[i].x-c.x+position.x;o.verts[i].y=o.verts[i].y-c.y+position.y}}if(o instanceof DynObject){Matter.Body.setPosition(o.matter,position)}}};Motion.rotate=function(dynObject,angle,point){if(!dynObject.locked){if(dynObject.skinmesh){Matter.Vertices.rotate(dynObject.skinmesh,angle,point)}return Matter.Body.rotate(dynObject.matter,angle,point)}};Motion.rotateTowards=function(dynObject,point){var a=Math.atan2(point.y-dynObject.matter.position.y,point.x-dynObject.matter.position.x);Motion.rotate(dynObject,a,dynObject.matter.position)};Motion.setAngle=function(dynObject,angle){if(!dynObject.locked){if(dynObject.skinmesh){Matter.Vertices.rotate(dynObject.skinmesh,-dynObject.cycle,dynObject);Matter.Vertices.rotate(dynObject.skinmesh,angle,dynObject)}return Matter.Body.setAngle(dynObject.matter,angle)}};module.exports=Motion},function(module,exports,__webpack_require__){const PhSim=__webpack_require__(0);var Static=function(){this.version=PhSim.version;this.simulations=[];this.simulations.push(new PhSim.Static.Simulation);this.simulations[0].layers[0].name="Untitled Layer";this.simulations[0].name="Untitled simulation";this.box=new PhSim.Static.Rectangle(0,0,800,600)};Static.GradientLimits=function(x0,y0,x1,y1){this.start=new PhSim.Vector(x0,y0);this.end=new PhSim.Vector(x1,y1)};Static.GradientStop=function(pos,color){this.color=color;this.pos=pos};Static.Gradient=function(){this.stops=[];this.name="";this.limits={start:{x:null,y:null},end:{x:null,y:null}}};Static.lclGradient=function(){this.src=null;this.limits=new PhSim.Static.GradientLimits(arguments[0],arguments[1],arguments[2],arguments[3]);this.type="linear"};Static.Polygon=function(verts){this.verts;if(Array.isArray(verts)){this.verts=verts}else{throw"Expecting array in argument 1"}this.shape="polygon"};Static.Circle=function(x,y,r){this.shape="circle";this.x=x;this.y=y;this.radius=r;this.cycle=null};Static.RegPolygon=function(x,y,r,n){this.shape="regPolygon";this.x=x;this.y=y;this.radius=r;this.cycle=null;this.sides=n};Static.Rectangle=function(x,y,w,h){this.shape="rectangle";this.x=x;this.y=y;this.w=w;this.h=h;this.cycle=0};Static.Composite=function(){this.shape="composite";this.name="Untitled"};Static.SimBox=function(w,h){this.width=w;this.height=h};Static.Camera=function(x,y,scale){this.x=x;this.y=y;this.c=scale};Static.Layer=function(){this.objUniverse=[];this.name=null};Static.Simulation=function(){this.layers=[];this.layers.push(new PhSim.Static.Layer);this.world={grav:1,bg:"white",border:null,unit:1};this.simulation=true;this.widgets=[]};Static.LO=function(L,O){L.layers[O].objUniverse};Static.SLO=function(S,L,O){return{S:S,L:L,O:O}};module.exports=Static},function(module,exports,__webpack_require__){const Centroid=__webpack_require__(7);const Vector=__webpack_require__(3);const Vertices={};var Matter;if(typeof window==="object"){Matter=window.Matter}else{Matter=__webpack_require__(1)}Vertices.regPolygon=function(regularPolygon){var a=[];var firstAngle=2*Math.PI/regularPolygon.sides;for(var i=0;i<regularPolygon.sides;i++){var x=regularPolygon.x+Math.cos(firstAngle*i+regularPolygon.cycle)*regularPolygon.radius;var y=regularPolygon.y+Math.sin(firstAngle*i+regularPolygon.cycle)*regularPolygon.radius;a.push(new Vector(x,y))}return a};Vertices.rectangle=function(rectangle){var a=[{x:rectangle.x,y:rectangle.y,topLeft:true},{x:rectangle.x+rectangle.w,y:rectangle.y,topRight:true},{x:rectangle.x+rectangle.w,y:rectangle.y+rectangle.h,bottomRight:true},{x:rectangle.x,y:rectangle.y+rectangle.h,bottomLeft:true}];if(rectangle.cycle){Matter.Vertices.rotate(a,rectangle.cycle,Centroid.rectangle(rectangle))}return a};Vertices.getRectangleCorners=function(rectangle){var a=Vertices.rectangle(rectangle);var z={topLeft:a[0],topRight:a[1],bottomLeft:a[3],bottomRight:a[2]};return z};module.exports=Vertices},function(module,exports,__webpack_require__){const Vector=__webpack_require__(3);const Centroid={};Centroid.shape=function(o){if(o.shape==="rectangle"){return Centroid.rectangle(o)}if(o.shape==="polygon"){return Centroid.polygon(o)}if(o.shape==="circle"||o.shape==="regPolygon"){return o}};Centroid.rectangle=function(rectangle){return{x:rectangle.x+.5*rectangle.w,y:rectangle.y+.5*rectangle.h}};Centroid.polygon=function(a){var v=new Vector(0,0);for(var j=0;j<a.verts.length;j++){v.x+=a.verts[j].x;v.y+=a.verts[j].y}v.x=1/a.verts.length*v.x;v.y=1/a.verts.length*v.y;return v};module.exports=Centroid},function(module,exports,__webpack_require__){const PhSim=__webpack_require__(0);const PhSimEventTarget={};PhSimEventTarget.on=function(eventStr,call,options={}){if(options&&options.slEvent===true){if(this.simulationEventStack[eventStr]){this.simulationEventStack[eventStr].push(call)}}else{if(this.eventStack[eventStr]){this.eventStack[eventStr].push(call)}}if(options){if(options===true){if(options.once){var f=function(){this.off(eventStr,call);this.off(eventStr,f)};this.on(eventStr,f)}}}else{throw new Error("Event Target Not Available")}};PhSimEventTarget.off=function(eventStr,call){var callIndex;if(this.eventStack[eventStr]&&this.eventStack[eventStr].includes(call)){callIndex=this.eventStack[eventStr].indexOf(call);this.eventStack[eventStr].splice(callIndex,1)}if(this.simulationEventStack[eventStr]&&this.simulationEventStack[eventStr].includes(call)){callIndex=this.simulationEventStack[eventStr].indexOf(call);this.simulationEventStack[eventStr].splice(callIndex,1)}};PhSimEventTarget.callEventClass=function(eventStr,thisArg,eventArg){var func;if(this.eventStack[eventStr]){for(let i=0;i<this.eventStack[eventStr].length;i++){func=this.eventStack[eventStr][i];eventArg.func=func;func.call(thisArg,eventArg)}}if(this instanceof PhSim){if(this.simulationEventStack[eventStr]){for(let j=0;j<this.simulationEventStack[eventStr].length;j++){func=this.simulationEventStack[eventStr][j];eventArg.func=func;func.call(thisArg,eventArg)}}}};module.exports=PhSimEventTarget},function(module,exports){const EventStack=function(){this.contact=[];this.beforeupdate=[];this.objupdate=[];this.afterupdate=[];this.beforeslchange=[];this.afterslchange=[];this.beforespriteimgload=[];this.afterspriteimgload=[];this.beforeforcekey=[];this.mouseup=[];this.mouseout=[];this.mousemove=[];this.keydown=[];this.collisionstart=[];this.collisionactive=[];this.collisionend=[];this.beforecounterset=[];this.aftercounterset=[];this.collisionchange=[];this.load=[];this.matterJSLoad=[];this.clone=[];this.objmousedown=[];this.objmouseover=[];this.objmouseout=[];this.firstslupdate=[];this.exit=[];this.mousedown=[];this.click=[];this.objclick=[];this.objmousemove=[];this.objmouseup=[];this.score=[];this.hazard=[];this.gamewin=[];this.levelwin=[];this.levelloss=[];this.wfunctionerror=[]};module.exports=EventStack},function(module,exports){var Gradients={};Gradients.extractGradient=function(ctx,jsObject){var gradient=ctx.createLinearGradient(jsObject.limits.start.x,jsObject.limits.start.y,jsObject.limits.end.x,jsObject.limits.end.y);for(var i=0;i<jsObject.stops.length;i++){gradient.addColorStop(jsObject.stops[i].pos,jsObject.stops[i].color)}return gradient};module.exports=Gradients},function(module,exports,__webpack_require__){const diagRect=__webpack_require__(12);const Static=__webpack_require__(5);const Vertices=__webpack_require__(6);const BoundingBox=function(verts){verts=Object.assign([],verts);verts.sort((function(a,b){return a.x-b.x}));this.smallX=verts[0].x;this.largeX=verts[verts.length-1].x;verts.sort((function(a,b){return a.y-b.y}));this.smallY=verts[0].y;this.largeY=verts[verts.length-1].y;var w=this.largeX-this.smallX;var h=this.largeY-this.smallY;var x=this.smallX;var y=this.smallY;Static.Rectangle.call(this,w,h,x,y)};BoundingBox.fromShape=function(object){if(object.shape==="polygon"){return new BoundingBox(object.verts)}if(object.shape==="regPolygon"){return new BoundingBox(Vertices.regPolygon(object))}if(object.shape==="rectangle"){return new BoundingBox(Vertices.rectangle(object,true))}if(object.shape==="circle"){var ax=object.x-object.radius;var ay=object.y-object.radius;var bx=object.x+object.radius;var by=object.y+object.radius;return diagRect(ax,ay,bx,by,0)}if(object.composite){var a=[];for(var i=0;i<object.objUniverse.length;i++){a.push(Vertices.rectangle(this.getStaticBoundingBox(object.objUniverse[i])))}a=a.flat(Infinity);return new BoundingBox(a)}};module.exports=BoundingBox},function(module,exports,__webpack_require__){const Static=__webpack_require__(5);var diagRect=function(x1,y1,x2,y2){var w=x2-x1;var h=y2-y1;return new Static.Rectangle(x1,y1,w,h)};module.exports=diagRect},function(module,exports){var Game=function(phSim,options){this.intLife=options.life;this.goal=options.goal;this.intScore=options.score;this.options=options;this.life=options.life;this.score=options.score;this.phSim=phSim};Game.Options=function(goal,life,score){this.goal=goal;this.life=life;this.score=score};Game.prototype.defaultGameWinModal=true;Game.prototype.defaultLevelWinModal=true;Game.prototype.setScore=function(c){var self=this;this.score=c;if(this.score>=this.goal&&Number.isInteger(this.score)&&Number.isInteger(this.goal)){this.phSim.pause();this.phSim.enableFilter();if(this.phSim.simulationIndex+1===this.phSim.simulations.length){if(this.defaultGameWinModal){this.phSim.callEventClass("gamewin",this,{});var a=self.phSim.alert({msg:"You Win!",closeButtonTxt:"Play again",bgColor:"#333",txtColor:"#fff",w:300,h:100,onok:function(){self.phSim.disableFilter();a.parentNode.removeChild(a);self.phSim.gotoSimulationIndex(0);self.phSim.play()}})}}else{this.phSim.callEventClass("levelwin",this,{});clearInterval(this.phSim.intervalLoop);this.phSim.disableFilter();this.phSim.gotoSimulationIndex(this.phSim.simulationIndex+1);self.phSim.play()}}this.phSim.callEventClass("score",this,{})},Game.prototype.setLife=function(c){this.life=c;if(this.life===0){this.end()}};Game.prototype.incrementLife=function(){this.setLife(this.life+1)};Game.prototype.decrementLife=function(){this.setLife(this.life-1)};Game.prototype.end=function(){this.phSim.pause();this.phSim.enableFilter();var self=this;var a=this.phSim.alert({msg:"Game Over",closeButtonTxt:"Try again",bgColor:"#333",txtColor:"#fff",w:300,h:100,onok:function(){self.phSim.gotoSimulationIndex(self.phSim.simulationIndex);self.phSim.play();self.phSim.disableFilter();a.parentNode.removeChild(a)}});this.phSim.callEventClass("levelloss",this,{})};Game.Widgets={};Game.Widgets.coin=function(dyn_object,widget){widget=widget||{};var value=widget.value||1;var self=this;var func=function(){var obj1=dyn_object;var a=function(){if(self.inSensorCollision(obj1)&&self.lclGame){self.lclGame.setScore(self.lclGame.score+value);self.off("collisionstart",a)}};return a};self.on("collisionstart",func())};Game.Widgets.hazard=function(dyn_object,widget){widget=widget||{};widget.damage=widget.damage||1;var self=this;var func=function(){var obj1=dyn_object;var a=function(){if(self.inSensorCollision(obj1)&&self.lclGame){self.lclGame.setLife(self.lclGame.life-widget.damage);self.off("collisionstart",a)}};return a};self.on("collisionstart",func())};Game.Widgets.health=function(dyn_object,widget){widget=widget||{};widget.lives=widget.lives||1;var self=this;var func=function(){var obj1=dyn_object;var a=function(){if(self.inSensorCollision(obj1)&&self.lclGame){self.lclGame.setLife(self.lclGame.life+widget.lives);self.off("collisionstart",a)}};return a};self.on("collisionstart",func())};Game.Widgets.endGame=function(dyn_object,widget){var f=this.createMotionFunction("position",dyn_object,widget.vector);this.createWFunction(dyn_object,f,widget)};module.exports=Game},function(module,exports,__webpack_require__){const DynObject=__webpack_require__(2);const PhSim=__webpack_require__(0);var Matter;if(typeof window==="object"){Matter=window.Matter}else{Matter=__webpack_require__(1)}const matterPlugin={name:"phsim",version:"0.1.0",install:function(matter){matter.after("Detector.collisions",(function(){matterPlugin.Detector.collisions.call(this,arguments)}))},Detector:{collisions:function(){for(var i=0;i<this.length;i++){var bodyA=this[i].bodyA;var bodyB=this[i].bodyB;var c_classesA;var c_classesB;if(bodyA.plugin.dynObject.noCollision||bodyB.plugin.dynObject.noCollision){this.splice(this.indexOf(this[i]),1)}if(bodyA.parent===bodyA){if(bodyA.plugin.dynObject instanceof DynObject){c_classesA=PhSim.Query.getCollisionClasses(bodyA.plugin.dynObject)}}else{c_classesA=PhSim.Query.getCollisionClasses(bodyA.parent.plugin.dynObject)}if(bodyB.parent===bodyB){if(bodyB.plugin.dynObject instanceof DynObject){c_classesB=PhSim.Query.getCollisionClasses(bodyB.plugin.dynObject)}}else{c_classesB=PhSim.Query.getCollisionClasses(bodyB.parent.plugin.dynObject)}if(c_classesA.length>0&&c_classesB.length>0){if(!PhSim.Query.intersectionExists(c_classesA,c_classesB)){this.splice(this.indexOf(this[i]),1);i=0}}}}}};PhSim.matterPlugin=matterPlugin;Matter.Plugin.register(PhSim.matterPlugin)},function(module,exports,__webpack_require__){const Gradients=__webpack_require__(10);const BoundingBox=__webpack_require__(11);const Centroid=__webpack_require__(7);const Vertices=__webpack_require__(6);var PhRender=function(ctx){this.ctx=ctx};PhRender.prototype.defaultAlpha=1;PhRender.prototype.defaultStrokeStyle="transparent";PhRender.prototype.defaultFillStyle="transparent";PhRender.prototype.setCtx=function(object){this.ctx.lineCap="round";if(typeof this.ctx.globalAlpha==="number"){this.ctx.globalAlpha=object.globalAlpha}else{this.ctx.globalAlpha=this.defaultAlpha}this.ctx.strokeStyle=object.strokeStyle||this.defaultStrokeStyle;this.ctx.fillStyle=object.fillStyle||this.defaultFillStyle;if(object.lineWidth){if(object.lineWidth===0){this.ctx.strokeStyle="transparent"}else{this.ctx.lineWidth=object.lineWidth}}else{this.ctx.strokeStyle="transparent"}};PhRender.prototype.unsetCtx=function(){this.ctx.globalAlpha=1};PhRender.prototype.renderPolygon=function(path){var w;var h;this.setCtx(path);this.ctx.beginPath();this.ctx.moveTo(path.verts[0].x,path.verts[0].y);for(var j=0;j<path.verts.length;j++){this.ctx.lineTo(path.verts[j].x,path.verts[j].y)}this.ctx.closePath();this.ctx.stroke();this.ctx.fill();if(path.sprite&&path.sprite.src){var img=this.spriteImgObj[path.sprite.src];var centroid=Centroid.polygon(path);this.ctx.imageSmoothingEnabled=path.sprite.smooth;this.ctx.save();this.ctx.beginPath();this.ctx.moveTo(path.verts[0].x,path.verts[0].y);for(let j=0;j<path.verts.length;j++){this.ctx.lineTo(path.verts[j].x,path.verts[j].y)}this.ctx.closePath();this.ctx.translate(centroid.x,centroid.y);if(path.sprite.repeat){var pattern=this.ctx.createPattern(img,"repeat");this.ctx.fillStyle=pattern;this.ctx.fill()}else if(path.sprite.fit){this.ctx.clip();var box=BoundingBox.fromShape(path);h=img.height*(box.w/img.width);this.renderSpriteByCenter(path.sprite.src,centroid.x,centroid.y,box.w,h,0)}else if(typeof path.sprite.w==="number"&&typeof path.sprite.h==="number"){this.ctx.clip();w=path.sprite.w||img.width;h=path.sprite.h||img.height;this.renderSpriteByCenter(path.sprite.src,0,0,w,h,0)}else if(typeof path.sprite.w!=="number"&&typeof path.sprite.h==="number"){this.ctx.clip();let w=img.width/img.height*path.sprite.h;this.renderSpriteByCenter(path.sprite.src,0,0,w,path.sprite.h,0)}else if(typeof path.sprite.w==="number"&&typeof path.sprite.h!=="number"){this.ctx.clip();let h=img.height/img.width*path.sprite.w;this.renderSpriteByCenter(path.sprite.src,0,0,path.sprite.w,h,0)}else if(typeof path.sprite.w!=="number"&&typeof path.sprite.h!=="number"){this.ctx.clip();this.renderSpriteByCenter(path.sprite.src,0,0,img.width,img.height,0)}}this.ctx.restore();this.unsetCtx()};PhRender.prototype.renderSpriteByCenter=function(url,x,y,w,h,a){var spriteImg=this.spriteImgObj[url];this.ctx.save();this.ctx.translate(x,y);this.ctx.rotate(a);if(h===null){this.ctx.drawImage(spriteImg,0,0,spriteImg.width,spriteImg.height,-w*.5,-h*.5,w)}else{this.ctx.drawImage(spriteImg,0,0,spriteImg.width,spriteImg.height,-w*.5,-h*.5,w,h)}this.ctx.restore()};PhRender.prototype.renderCircle=function(circle){var w;var h;this.setCtx(circle);this.ctx.beginPath();this.ctx.arc(circle.x,circle.y,circle.radius,0,2*Math.PI);this.ctx.closePath();this.ctx.fill();this.ctx.stroke();if(circle.gradient){this.ctx.save();this.ctx.translate(circle.x,circle.y);this.ctx.rotate(circle.cycle);this.ctx.fillStyle=Gradients.extractGradient(this.ctx,circle.gradient);this.ctx.arc(0,0,circle.radius,0,2*Math.PI);this.ctx.fill();this.ctx.restore()}if(circle.sprite&&circle.sprite.src){var img=this.spriteImgObj[circle.sprite.src];this.ctx.imageSmoothingEnabled=circle.sprite.smooth;this.ctx.save();this.ctx.translate(circle.x,circle.y);this.ctx.rotate(circle.cycle);this.ctx.arc(0,0,circle.radius,0,2*Math.PI);if(circle.sprite.repeat){var pattern=this.ctx.createPattern(img,"repeat");this.ctx.fillStyle=pattern;this.ctx.fill()}else if(circle.sprite.fit){this.ctx.clip();var box=BoundingBox.fromShape(circle);h=img.height*(box.w/img.width);this.renderSpriteByCenter(circle.sprite.src,0,0,box.w,h);this.ctx.restore()}else if(typeof circle.sprite.w==="number"&&typeof circle.sprite.h==="number"){w=circle.sprite.w||img.width;h=circle.sprite.h||img.height;this.ctx.clip();this.renderSpriteByCenter(circle.sprite.src,0,0,w,h,0)}else if(typeof circle.sprite.w!=="number"&&typeof circle.sprite.h==="number"){this.ctx.clip();let w=img.width/img.height*circle.sprite.h;this.renderSpriteByCenter(circle.sprite.src,0,0,w,circle.sprite.h,0)}else if(typeof circle.sprite.w==="number"&&typeof circle.sprite.h!=="number"){this.ctx.clip();let h=img.height/img.width*circle.sprite.w;this.renderSpriteByCenter(circle.sprite.src,0,0,circle.sprite.w,h,0)}else if(typeof circle.sprite.w!=="number"&&typeof circle.sprite.h!=="number"){this.ctx.clip();this.renderSpriteByCenter(circle.sprite.src,0,0,img.width,img.height,0)}}this.ctx.restore();this.unsetCtx()};PhRender.prototype.renderRectangle=function(rectangle){var c=Centroid.rectangle(rectangle);var x=-rectangle.w*.5;var y=-rectangle.h*.5;this.setCtx(rectangle);this.ctx.translate(c.x,c.y);this.ctx.rotate(rectangle.cycle);this.ctx.beginPath();this.ctx.rect(x,y,rectangle.w,rectangle.h);this.ctx.closePath();this.ctx.stroke();this.ctx.fill();if(rectangle.widgets){for(let i=0;i<rectangle.widgets.length;i++){if(rectangle.widgets[i].type==="rectText"){this.rectText(rectangle.widgets[i],x,y,rectangle.w,rectangle.h,0)}}}this.ctx.rotate(-rectangle.cycle);this.ctx.translate(-c.x,-c.y);if(typeof rectangle.sprite==="object"&&typeof rectangle.sprite.src==="string"){var img=this.spriteImgObj[rectangle.sprite.src];this.ctx.imageSmoothingEnabled=rectangle.sprite.smooth;this.ctx.save();this.ctx.translate(c.x,c.y);this.ctx.rotate(rectangle.cycle);this.ctx.rect(-rectangle.w*.5,-rectangle.h*.5,rectangle.w,rectangle.h);if(rectangle.sprite.repeat){var pattern=this.ctx.createPattern(img,"repeat");this.ctx.fillStyle=pattern;this.ctx.fill();this.ctx.restore()}else if(rectangle.sprite.fit){this.ctx.clip();let h=img.height*(rectangle.w/img.width);this.renderSpriteByCenter(rectangle.sprite.src,0,0,rectangle.w,h,0)}else if(typeof rectangle.sprite.w==="number"&&typeof rectangle.sprite.h==="number"){this.ctx.clip();this.renderSpriteByCenter(rectangle.sprite.src,0,0,rectangle.sprite.w,rectangle.sprite.h,0)}else if(typeof rectangle.sprite.w!=="number"&&typeof rectangle.sprite.h==="number"){this.ctx.clip();let w=img.width/img.height*rectangle.sprite.h;this.renderSpriteByCenter(rectangle.sprite.src,0,0,w,rectangle.sprite.h,0)}else if(typeof rectangle.sprite.w==="number"&&typeof rectangle.sprite.h!=="number"){this.ctx.clip();let h=img.height/img.width*rectangle.sprite.w;this.renderSpriteByCenter(rectangle.sprite.src,0,0,rectangle.sprite.w,h,0)}else if(typeof rectangle.sprite.w!=="number"&&typeof rectangle.sprite.h!=="number"){this.ctx.clip();this.renderSpriteByCenter(rectangle.sprite.src,0,0,img.width,img.height,0)}}this.ctx.restore();this.unsetCtx()};PhRender.prototype.rectText=function(text,x,y,w,h,a){this.ctx.save();this.ctx.translate(x,y);this.ctx.rotate(a);this.ctx.beginPath();this.ctx.rect(0,0,w,h);this.ctx.clip();this.ctx.textAlign="left";this.ctx.fillStyle=text.fill||"#000000";this.ctx.lineWidth=undefined;if(text.lineWidth){this.ctx.lineWidth=text.lineWidth}this.ctx.strokeStyle=text.borderColor||"#000000";this.ctx.font=text.size+"px "+text.font;this.ctx.textBaseline="top";var content=text.content||"";if(this.dynSim){content=this.dynSim.processVar(content)}this.ctx.fillText(content,0,0);if(text.lineWidth){this.ctx.strokeText(content,0,0)}this.ctx.restore()};PhRender.prototype.renderRegPolygon=function(regPolygon){var vertSet=Vertices.regPolygon(regPolygon);this.setCtx(regPolygon);this.ctx.beginPath();this.ctx.moveTo(vertSet[0].x,vertSet[0].y);for(let j=0;j<vertSet.length;j++){this.ctx.lineTo(vertSet[j].x,vertSet[j].y)}this.ctx.closePath();this.ctx.stroke();this.ctx.globalAlpha=regPolygon.fillAlpha;this.ctx.fill();if(regPolygon.sprite&&regPolygon.sprite.src){var img=this.spriteImgObj[regPolygon.sprite.src];this.ctx.imageSmoothingEnabled=regPolygon.sprite.smooth;this.ctx.save();this.ctx.beginPath();this.ctx.moveTo(vertSet[0].x,vertSet[0].y);for(let j=0;j<vertSet.length;j++){this.ctx.lineTo(vertSet[j].x,vertSet[j].y)}this.ctx.closePath();this.ctx.translate(regPolygon.x,regPolygon.y);this.ctx.rotate(regPolygon.cycle);if(regPolygon.sprite.repeat){var pattern=this.ctx.createPattern(img,"repeat");this.ctx.fillStyle=pattern;this.ctx.fill()}if(regPolygon.sprite.fit){this.ctx.clip();let box=BoundingBox.fromShape(regPolygon);let h=img.height*(box.w/img.width);this.renderSpriteByCenter(regPolygon.sprite.src,0,0,box.w,h,0)}else if(typeof regPolygon.sprite.w==="number"&&typeof regPolygon.sprite.h==="number"){this.ctx.clip();let w=regPolygon.sprite.w;let h=regPolygon.sprite.h;this.renderSpriteByCenter(regPolygon.sprite.src,0,0,w,h,0)}else if(typeof regPolygon.sprite.w!=="number"&&typeof regPolygon.sprite.h==="number"){this.ctx.clip();let w=img.width/img.height*regPolygon.sprite.h;this.renderSpriteByCenter(regPolygon.sprite.src,0,0,w,regPolygon.sprite.h,0)}else if(typeof regPolygon.sprite.w==="number"&&typeof regPolygon.sprite.h!=="number"){this.ctx.clip();let h=img.height/img.width*regPolygon.sprite.w;this.renderSpriteByCenter(regPolygon.sprite.src,0,0,regPolygon.sprite.w,h,0)}else if(typeof regPolygon.sprite.w!=="number"&&typeof regPolygon.sprite.h!=="number"){this.ctx.clip();this.renderSpriteByCenter(regPolygon.sprite.src,0,0,img.width,img.height,0)}}this.ctx.restore();this.unsetCtx()};PhRender.prototype.renderStatic=function(obj){if(obj.shape==="polygon"){this.renderPolygon(obj)}if(obj.shape==="circle"){this.renderCircle(obj)}if(obj.shape==="rectangle"){this.renderRectangle(obj)}if(obj.shape==="regPolygon"){this.renderRegPolygon(obj)}if(obj.shape==="composite"){for(var i=0;i<obj.parts.length;i++){this.renderStatic(obj.parts[i])}}};PhRender.prototype.renderStaticLayer=function(layer){for(var i=0;i<layer.objUniverse.length;i++){this.renderStatic(layer.objUniverse[i])}};PhRender.prototype.simulation=function(simulation){for(var i=0;i<simulation.layers.length;i++){if(!simulation.layers[i].hidden){this.layer(simulation.layers[i])}}};PhRender.prototype.dynamicSkeleton=function(object){if(object.static.shape==="polygon"){this.ctx.beginPath();this.ctx.moveTo(object.skinmesh[0].x,object.skinmesh[0].y);for(var j=0;j<object.skinmesh.length;j++){this.ctx.lineTo(object.skinmesh[j].x,object.skinmesh[j].y)}}else{this.ctx.beginPath();this.ctx.moveTo(object.matter.vertices.x,object.matter.vertices.y);for(let j=0;j<object.matter.vertices.length;j++){this.ctx.lineTo(object.matter.vertices[j].x,object.matter.vertices[j].y)}}};PhRender.prototype.dynamicSkeleton_center=function(object){if(object.static.shape==="polygon"){this.ctx.beginPath();this.ctx.moveTo(object.skinmesh[0].x-object.matter.position.x,object.skinmesh[0].y-object.matter.position.y);for(var j=0;j<object.skinmesh.length;j++){this.ctx.lineTo(object.skinmesh[j].x-object.matter.position.x,object.skinmesh[j].y-object.matter.position.y)}}else{this.ctx.beginPath();this.ctx.moveTo(object.matter.vertices.x-object.matter.position.x,object.matter.vertices.y-object.matter.position.y);for(let j=0;j<object.matter.vertices.length;j++){this.ctx.lineTo(object.matter.vertices[j].x-object.matter.position.x,object.matter.vertices[j].y-object.matter.position.y)}}};PhRender.prototype.drawDynamicSkeleton=function(object){this.dynamicSkeleton(object);this.ctx.closePath();this.ctx.stroke()};PhRender.prototype.dynamicRenderDraw=function(dynObject){this.ctx.lineWidth=dynObject.lineWidth;this.ctx.fillStyle=dynObject.fillStyle;this.ctx.strokeStyle=dynObject.strokeStyle;if(dynObject.shape==="polygon"){this.drawDynamicSkeleton(dynObject);this.ctx.fill();if(dynObject.sprite&&dynObject.sprite.src){var img=this.spriteImgObj[dynObject.sprite.src];this.ctx.imageSmoothingEnabled=dynObject.sprite.smooth;if(dynObject.sprite.repeat){this.ctx.save();this.dynamicSkeleton(dynObject);this.ctx.translate(dynObject.matter.position.x,dynObject.matter.position.y);this.ctx.rotate(dynObject.matter.angle);this.ctx.scale(dynObject.sprite.scale,dynObject.sprite.scale);var pattern=this.ctx.createPattern(img,"repeat");this.ctx.fillStyle=pattern;this.ctx.fill();this.ctx.restore()}else if(dynObject.sprite.fit){this.ctx.save();this.ctx.beginPath();this.ctx.moveTo(dynObject.verts[0].x,dynObject.verts[0].y);for(var j=0;j<dynObject.verts.length;j++){this.ctx.lineTo(dynObject.verts[j].x,dynObject.verts[j].y)}this.ctx.closePath();this.ctx.clip();var box=BoundingBox.fromShape(dynObject);var h=img.height*(box.w/img.width);this.renderSpriteByCenter(dynObject.sprite.src,dynObject.matter.position.x,dynObject.matter.position.y,box.w,h,dynObject.matter.angle);this.ctx.restore()}else{this.renderSpriteByCenter(dynObject.sprite.src,dynObject.matter.position.x,dynObject.matter.position.y,img.width,img.height,dynObject.matter.angle)}}}if(dynObject.shape==="circle"){this.renderCircle(dynObject)}if(dynObject.shape==="regPolygon"){this.renderRegPolygon(dynObject)}if(dynObject.shape==="rectangle"){this.renderRectangle(dynObject)}if(dynObject.shape==="composite"){for(var i=1;i<dynObject.parts.length;i++){this.dynamicRenderDraw(dynObject.parts[i])}}};PhRender.prototype.dynamicDrawLayer=function(L,sim,simulationI){for(let i=0;i<sim.simulations[simulationI].layers[L].length;i++){this.dynamicRenderDraw(L,i)}};module.exports=PhRender},function(module,exports){var Sprites={Calc:{}};Sprites.Sprite=function(){this.src=null;this.w=null;this.h=null;this.x=null;this.y=null;this.fit=null;this.repeat=null;this.object=null};Sprites.renderSprite=function(ctx,sprite){var localElm=document.createElement("img");localElm.src=sprite.src;if(sprite.spec===true){ctx.drawImage(localElm,sprite.x,sprite.y,sprite.w,sprite.h)}if(sprite.auto===true){ctx.drawImage(localElm,sprite.x,sprite.y,sprite.w,sprite.h)}};Sprites.renderGlobalSprites=function(ctx,simulation){for(let i=0;i<simulation.sprites.length;i++){Sprites.renderSprite(ctx,simulation.sprites[i])}};Sprites.circularSpriteRenderCanvas=function(ctx,canvas,angle){var localElm=document.createElement("canvas");var localCtx=localElm.getContext("2d");var localImg=document.createElement("img");localImg.src=canvas.src;localCtx.rotate(angle);localCtx.drawImage()};Sprites.spriteImgObj=function(sprites,onload=function(){}){Object.defineProperty(this,"array",{enumerable:false,value:[],writable:true});Object.defineProperty(this,"static",{enumerable:false,value:{},writable:true});Object.defineProperty(this,"loaded_n",{enumerable:false,value:0,writable:true});Object.defineProperty(this,"loaded",{enumerable:false,value:false,writable:true});Object.defineProperty(this,"onload",{enumerable:false,value:onload,writable:true});Object.defineProperty(this,"urls",{enumerable:false,value:[],writable:true});Object.defineProperty(this,"img",{enumerable:false,value:[],writable:true});Object.defineProperty(this,"loadedImg",{enumerable:false,value:[],writable:true});Object.defineProperty(this,"length",{enumerable:false,value:0,writable:true});var self=this;for(var i=0;i<sprites.length;i++){self.addSprite(sprites[i],(function(){if(self.loadedImg.length===self.img.length){onload()}}))}if(sprites.length===0){self.onload();self.loaded=true}};Sprites.spriteImgObj.prototype.addSprite=function(src,onload=function(){}){if(typeof src==="object"&&typeof src.src==="string"){src=src.src}var self=this;let img=document.createElement("img");let f=function(){self[src]=img;self.urls.push(src);self.loadedImg.push(this);self.length++;onload();img.removeEventListener("load",f)};img.addEventListener("load",f);this.img.push(img);img.src=src;return img};module.exports=Sprites},function(module,exports,__webpack_require__){const PhSim=__webpack_require__(0);var Audio={};Audio.AudioArray=function(p_audio,onload){this.array=[];this.loaded_n=0;this.loaded=false;this.onload=onload;var self=this;if(p_audio.length===0){self.loaded=true;self.onload()}for(var i=0;i<p_audio.length;i++){var audio=document.createElement("audio");var f=function(){self.loaded_n++;if(self.array.length===self.loaded_n){self.loaded=true;self.onload();audio.removeEventListener("canplaythrough",f)}};audio.addEventListener("canplaythrough",f);audio.src=p_audio[i].src;audio.loop=p_audio[i].loop;this.array.push(audio)}};Audio.playAudioByIndex=function(phsim,i){return phsim.audioArray.array[i].play()};PhSim.prototype.playAudioByIndex=function(i){Audio.playAudioByIndex(this,i)};Audio.pauseAudioByIndex=function(phsim,i){return phsim.audioArray.array[i].pause()};PhSim.prototype.pauseAudioByIndex=function(i){return Audio.pauseAudioByIndex(this,i)};Audio.setAudioVolByIndex=function(phsim,i,v){return phsim.audioArray.array[i].volume=v};PhSim.prototype.setAudioVolByIndex=function(i,v){return Audio.setAudioVolByIndex(this,i,v)};Audio.setAudioMuteByIndex=function(phsim,i){return phsim.audioArray.array[i].muted=true};PhSim.prototype.setAudioMuteByIndex=function(i){return Audio.setAudioMuteByIndex(this,i)};Audio.toggleAudioByIndex=function(phsim,i){return phsim.audioArray.array[i].muted=!phsim.audioArray.array[i].muted};PhSim.prototype.toggleAudioByIndex=function(i){return Audio.toggleAudioByIndex(this,i)};module.exports=Audio},function(module,exports){const Events={};Events.PhSimEvent=function(type){this.target=null;this.timestamp=null;this.type=type};Events.PhSimDynEvent=function(){Events.PhSimEvent.call(this);this.layer=null;this.simulation=null;this.object=null};Events.PhSimDynEvent.prototype=Object.create(Events.PhSimEvent.prototype);Events.PhSimEventKey=function(){Events.PhSimDynEvent.call(this);this.key=null;this.domEvent=null};Events.PhSimEventKey.prototype=Object.create(Events.PhSimDynEvent.prototype);Events.PhSimMouseEvent=function(){Events.PhSimDynEvent.call(this);this.x=null;this.y=null;this.domEvent=null;this.dynArr=null};Events.PhSimMouseEvent.prototype=Object.create(Events.PhSimDynEvent.prototype);Events.PhSimCollision=function(){this.bodyA=null;this.bodyB=null;this.matter=null};module.exports=Events},function(module,exports,__webpack_require__){const PhSim=__webpack_require__(0);PhSim.prototype.L=function(L){return this.dynTree[L]};PhSim.prototype.LO=function(L,O){return this.dynTree[L][O]};PhSim.prototype.getObjectFromLOStr=function(str){str.split(",");return this.LO(str[1],str[2])}},function(module,exports,__webpack_require__){const PhSim=__webpack_require__(0);PhSim.createFromCanvas=function(sim,canvas){var o=Object.create(sim);o.canvas=canvas;return new PhSim(o)};PhSim.createFromContainer=function(sim,container){var o=Object.create(sim);o.container=container;return new PhSim(o)};PhSim.createContainer=function(sim){var container=document.createElement("div");return this.createFromContainer(sim,container)};PhSim.loadFromJSON=function(jsonURL,onload){var x=new XMLHttpRequest;x.open("GET",jsonURL);var f=function(){var o=PhSim.createContainer(JSON.parse(x.responseText));onload(o);x.removeEventListener("load",f)};x.addEventListener("load",f);x.send()};PhSim.prototype.configRender=function(){this.assignPhRender(new PhSim.PhRender(this.ctx));if(!this.noCamera){this.camera=new PhSim.Camera(this);this.camera.translate(-this.camera.x,-this.camera.y)}}},function(module,exports,__webpack_require__){const PhSim=__webpack_require__(0);PhSim.prototype.configFilter=function(container){this.htmlFilter=document.createElement("div");this.htmlFilter.style.background="rgba(3,3,3,0.7)";this.htmlFilter.style.position="absolute";this.htmlFilter.style.display="none";this.htmlFilter.classList.add("dynsim-filter");container.appendChild(this.htmlFilter)};PhSim.prototype.enableFilter=function(){var elmBox=this.canvas.getBoundingClientRect();this.htmlFilter.style.display="inline-block";this.htmlFilter.style.left="0px";this.htmlFilter.style.position="absolute";this.htmlFilter.style.width=Math.floor(elmBox.width)+"px";this.htmlFilter.style.height=Math.floor(elmBox.height)+"px"};PhSim.prototype.disableFilter=function(){this.htmlFilter.style.display="none"};PhSim.prototype.toggleFilter=function(){if(this.htmlFilter.style.display==="none"){this.enableFilter()}else{this.disableFilter()}};PhSim.prototype.alert=function(options){var alertBox=document.createElement("div");alertBox.style.backgroundColor=options.bgColor;alertBox.style.color=options.txtColor;alertBox.style.textAlign="center";alertBox.style.width=options.w+"px";alertBox.style.height=options.h+"px";alertBox.style.fontSize="20px";var elmBox=this.canvas.getBoundingClientRect();var alertBoxMsg=document.createElement("div");alertBoxMsg.className="phsim-alertbox-msg";alertBoxMsg.innerText=options.msg;alertBoxMsg.style.textAlign="left";alertBoxMsg.style.padding="20px";alertBox.appendChild(alertBoxMsg);var closeButton=document.createElement("div");var f=function(){options.onok();closeButton.removeEventListener("click",f)};closeButton.addEventListener("click",f);closeButton.innerText=options.closeButtonTxt;alertBox.appendChild(closeButton);this.container.appendChild(alertBox);alertBox.style.position="absolute";alertBox.style.left=elmBox.width*.5-alertBox.offsetWidth*.5+"px";alertBox.style.top=elmBox.height*.5-alertBox.offsetHeight*.5+"px";return alertBox}},function(module,exports,__webpack_require__){var Matter;if(typeof window==="object"){Matter=window.Matter}else{Matter=__webpack_require__(1)}const DynObject=__webpack_require__(2);const PhSim=__webpack_require__(0);PhSim.prototype.connectDynObjects=function(parent,child){Matter.Body.setStatic(child,true);var f=function(){var v={x:parent.matter.position.x-parent.matter.positionPrev.x,y:parent.matter.position.y-parent.matter.positionPrev.y};PhSim.Motion.translate(child,v);PhSim.Motion.rotate(child,parent.matter.angle-parent.matter.anglePrev,parent.matter.position)};this.on("afterupdate",f);return f};PhSim.prototype.forAllObjects=function(call){var a=this.objUniverse;for(var i=0;i<a.length;i++){var z=call(a[i]);if(z===false){break}}};PhSim.prototype.addToOverlayer=function(o){if(o instanceof DynObject){Matter.World.add(this.matterJSWorld,o.matter)}this.objUniverse.push(o)};PhSim.prototype.isNonDyn=function(o){return o.noDyn};PhSim.prototype.addObject=function(o,options={}){if(typeof options.layer==="number"){this.dynTree[options.layer].push(o);if(o instanceof DynObject){o.layerBranch=this.dynTree[options.layer]}}this.objUniverse.push(o);if(o instanceof DynObject){o.phSim=this;Matter.World.add(this.matterJSWorld,o.matter);if(o.static.widgets){this.extractWidgets(o)}}return o};PhSim.prototype.removeDynObj=function(dynObject){Matter.Composite.remove(this.matterJSWorld,dynObject.matter);this.objUniverse.splice(this.objUniverse.indexOf(dynObject),1);if(dynObject.layerBranch){var i=dynObject.layerBranch.indexOf(dynObject);dynObject.layerBranch.splice(i,1);dynObject.layerBranch=undefined}return dynObject};PhSim.prototype.setDynObjectLifespan=function(dynObject,lifespan){var self=this;setTimeout(lifespan,(function(){self.removeDynObj(dynObject)}))};PhSim.prototype.renderAllCounters=function(){for(var i=0;i<this.counterArray.length;i++){this.renderCounterByIndex(i)}}},function(module,exports){},function(module,exports,__webpack_require__){const PhSim=__webpack_require__(0);PhSim.prototype.getEventBridge=function(f){var self=this;return function(e){f.call(self,e)}};PhSim.prototype.registerCanvasEvents=function(){var self=this;this.dispatchMouseDown=function(e){var eventObj=new PhSim.Events.PhSimMouseEvent;var canvas=self.ctx.canvas;eventObj.domEvent=e;eventObj.x=self.mouseX;eventObj.y=self.mouseY;eventObj.type="mousedown";eventObj.dynArr=self.pointObjArray(eventObj.x,eventObj.y);if(!self.paused){if(self.objMouseArr&&self.objMouseArr.length>0){eventObj.target=eventObj.dynArr[eventObj.dynArr.length-1];self.callEventClass("objmousedown",canvas,eventObj);for(var i=0;i<eventObj.dynArr.length;i++){eventObj.dynArr[i].callEventClass("objmousedown",eventObj.dynArr[i],eventObj)}}}self.callEventClass("mousedown",canvas,eventObj)};this.canvas.addEventListener("mousedown",this.dispatchMouseDown);this.dispatchClick=function(e){var eventObj=new PhSim.Events.PhSimMouseEvent;var canvas=self.ctx.canvas;eventObj.domEvent=e;eventObj.x=self.mouseX;eventObj.y=self.mouseY;eventObj.type="click";eventObj.dynArr=self.pointObjArray(eventObj.x,eventObj.y);if(self.objMouseArr.length>0){eventObj.target=eventObj.dynArr[eventObj.dynArr.length-1];self.callEventClass("objclick",canvas,eventObj);for(var i=0;i<eventObj.dynArr.length;i++){eventObj.dynArr[i].callEventClass("objclick",eventObj.dynArr[i],eventObj)}}self.callEventClass("click",canvas,eventObj)};this.canvas.addEventListener("click",this.dispatchClick);this.dispatchMouseMove=function(e){var perform_i=performance.now();var eventObj=new PhSim.Events.PhSimMouseEvent;var canvas=self.ctx.canvas;var rect=canvas.getBoundingClientRect();eventObj.domEvent=e;eventObj.x=e.clientX-rect.left-self.camera.x;eventObj.y=e.clientY-rect.top-self.camera.y;eventObj.dynArr=self.pointObjArray(eventObj.x,eventObj.y);if(self.mouseX&&self.mouseY){self.prevMouseX=self.mouseX;self.prevMouseY=self.mouseY}self.prevObjMouseArr=[];if(self.objMouseArr){self.prevObjMouseArr=[...self.objMouseArr]}self.mouseX=eventObj.x;self.mouseY=eventObj.y;self.dynArr=self.objMouseArr;self.objMouseArr=[];self.formerMouseObjs=[];self.newMouseObjs=[];if(self.init){for(var i=0;i<self.objUniverse.length;i++){if(self.pointInObject(self.objUniverse[i],self.mouseX,self.mouseY)){self.objMouseArr.push(self.objUniverse[i]);self.objUniverse[i].callEventClass("objmousemove",self.objUniverse[i],eventObj)}if(!self.objMouseArr.includes(self.objUniverse[i])&&self.prevObjMouseArr.includes(self.objUniverse[i])){self.formerMouseObjs.push(self.objUniverse[i]);self.objUniverse[i].callEventClass("objmouseover",self.objUniverse[i],eventObj)}if(self.objMouseArr.includes(self.objUniverse[i])&&!self.prevObjMouseArr.includes(self.objUniverse[i])){self.newMouseObjs.push(self.objUniverse[i]);self.objUniverse[i].callEventClass("objmouseout",self.objUniverse[i],eventObj)}}if(self.objMouseArr&&self.objMouseArr.length>0){eventObj.target=eventObj.dynArr[eventObj.dynArr.length-1];self.callEventClass("objmousemove",canvas,eventObj)}if(self.newMouseObjs&&self.newMouseObjs.length>0){eventObj.newMouseObjs=self.newMouseObjs;eventObj.target=eventObj.newMouseObjs[eventObj.dynArr.length-1];self.callEventClass("objmouseover",canvas,eventObj)}if(self.formerMouseObjs&&self.formerMouseObjs.length>0){eventObj.formerMouseObjs=self.formerMouseObjs;eventObj.target=eventObj.formerMouseObjs[eventObj.dynArr.length-1];self.callEventClass("objmouseout",canvas,eventObj)}}self.callEventClass("mousemove",canvas,eventObj);if(self.debugging.logMouseMovePerformance){var perform_f=performance.now()-perform_i;self.debuggingData.mouseMovePerformance=self.debuggingData.mouseMovePerformance||[];self.debuggingData.mouseMovePerformance.push({delta:perform_f,perform_i:perform_i,x:eventObj.x,y:eventObj.y})}};this.canvas.addEventListener("mousemove",this.dispatchMouseMove);this.dispatchMouseUp=function(e){var eventObj=new PhSim.Events.PhSimMouseEvent;var canvas=self.ctx.canvas;eventObj.domEvent=e;eventObj.x=self.mouseX;eventObj.y=self.mouseY;self.mouseX=eventObj.x;self.mouseY=eventObj.y;eventObj.dynArr=self.pointObjArray(eventObj.x,eventObj.y);if(self.objMouseArr.length>0){eventObj.target=eventObj.dynArr[eventObj.dynArr.length-1];self.callEventClass("objmouseup",canvas,eventObj);for(var i=0;i<eventObj.dynArr.length;i++){eventObj.dynArr[i].callEventClass("objmouseup",eventObj.dynArr[i],eventObj)}}self.callEventClass("mouseup",canvas,eventObj)};this.canvas.addEventListener("mouseup",this.getEventBridge(self.dispatchMouseUp));self.dispatchMouseOut=function(e){var eventObj=new PhSim.Events.PhSimMouseEvent;var canvas=self.ctx.canvas;eventObj.domEvent=e;eventObj.x=self.mouseX;eventObj.y=self.mouseY;self.mouseX=eventObj.x;self.mouseY=eventObj.y;self.callEventClass("mouseout",canvas,eventObj)};this.canvas.addEventListener("mouseout",this.dispatchMouseOut)};PhSim.prototype.deregisterCanvasEvents=function(){};PhSim.prototype.registerKeyEvents=function(){var self=this;self.windowObj=self.windowObj||window;self.keydownBridge=function(e){var eventObj=new PhSim.Events.PhSimEventKey;eventObj.domEvent=e;eventObj.key=e.key;eventObj.code=e.code;eventObj.type="keydown";self.callEventClass("keydown",this,eventObj)};self.keydownBridgeWrapper=function(e){if(!self.filter){self.keydownBridge(e)}};self.windowObj.addEventListener("keydown",self.keydownBridgeWrapper)};PhSim.prototype.deregisterKeyEvents=function(){this.windowObj.removeEventListener("keydown",self.keydownBridgeWrapper)}},function(module,exports,__webpack_require__){const{ObjLoops:ObjLoops}=__webpack_require__(0);const Vector=__webpack_require__(3);const PhSim=__webpack_require__(0);var Matter;if(typeof window==="object"){Matter=window.Matter}else{Matter=__webpack_require__(1)}PhSim.Query={};PhSim.Query.getSpecialRectanglePoints=function(rectangle){var o={center:{rel:{x:.5*rectangle.w,y:.5*rectangle.h},abs:{x:rectangle.x+o.center.rel.x,y:rectangle.h+o.center.rel.y}},sidepoint:{rel:{x:rectangle.w,y:.5*rectangle.h},abs:{x:o.sidepoint.rel.x+rectangle.x,y:o.sidepoint.rel.y+rectangle.y}}};return o};PhSim.prototype.getStatusStr=function(){return PhSim.Query.getStatusStr(this)};PhSim.Query.getStatusStr=function(phSim){return PhSim.statusStruct[phSim.status]};PhSim.Query.getCollisionClasses=function(dynObject){if(dynObject.collisionClass){var a=dynObject.collisionClass;var b=a.split(" ");return b}else{return[]}};PhSim.prototype.getUniversalObjArray=function(){var array=[];for(let i=0;i<this.matterJSWorld.composites.length;i++){var a=this.matterJSWorld.composites[i].bodies;for(let j=0;j<a.length;j++){array.push(a[j])}}for(let i=0;i<this.matterJSWorld.bodies.length;i++){array.push(this.matterJSWorld.bodies[i])}return array};PhSim.Query.chkWidgetType=function(widget){for(var i=0;i<PhSim.boolKey_lc.length;i++){if(widget[PhSim.boolKey_lc[i]]){return PhSim.boolKey_lc[i]}}return"unknown_widget"};PhSim.prototype.getStatic=function(dynObject){if(dynObject.static||dynObject.static){return null}else{return dynObject.static}};PhSim.prototype.getObjectByName=function(str){for(var i=0;i<this.objUniverse.length;i++){if(this.objUniverse[i].name===str){return this.objUniverse[i]}}};PhSim.Query.getObjectByName=function(o,str){var x;if(Array.isArray(o)){for(var i=0;i<o.length;i++){if(o.name===str){return o[i]}}}else if(Array.isArray(o.simulations)){ObjLoops.global(o,(function(p){if(p.name===str){x=p}}));return x}else if(Array.isArray(o.layers)){ObjLoops.layer(o,(function(p){if(p.name===str){x=p}}));return x}else if(Array.isArray(o.objUniverse)){PhSim.Query.getObjectByName(o.objUniverse,str)}};PhSim.prototype.collided=function(dynObjectA,dynObjectB){return Matter.SAT.collides(dynObjectA.matter,dynObjectB.matter).collided};PhSim.prototype.isInCollision=function(dynObject){var self=this;var returnValue=false;this.forAllObjects((function(object){var a=self.collided(dynObject,object);if(a===true){returnValue=a;return false}}));return returnValue};PhSim.Query.pointInVerts=function(a,v){var canvas=document.createElement("canvas");var ctx=canvas.getContext("2d");ctx.beginPath();ctx.moveTo(a[0].x,a[0].y);for(var i=0;i<a.length;i++){ctx.lineTo(a[i].x,a[i].y)}ctx.closePath();var p=ctx.isPointInPath(v.x,v.y);ctx.stroke();return p};PhSim.Query.pointInVertsBorder=function(a,v,width){if(width){var canvas=document.createElement("canvas");var ctx=canvas.getContext("2d");ctx.lineWidth=width;ctx.beginPath();ctx.lineTo(a[0].x,a[0].y);for(var i=0;i<a.length;i++){ctx.moveTo(a[i].x,a[i].y)}ctx.closePath();var p=ctx.isPointInPath(v.x,v.y);ctx.stroke();return p}else{return false}};PhSim.Query.deepClone=function(o){return JSON.parse(JSON.stringify(o))};PhSim.Query.pointInRectangle=function(o,x,y){var a=PhSim.Vertices.rectangle(o);return PhSim.Query.pointInVerts(a,new Vector(x,y))};PhSim.Query.pointInObject=function(o,x,y){if(o.shape==="rectangle"){return PhSim.Query.pointInRectangle(o,x,y)}else if(o.shape==="circle"){var d=Vector.distance(o,new Vector(x,y));if(d<o.radius){return true}else{return false}}else if(o.shape==="regPolygon"){var a=PhSim.Vertices.regPolygon(o);return PhSim.Query.pointInVerts(a,new Vector(x,y))}else if(o.shape==="polygon"){return PhSim.Query.pointInVerts(o.verts,new Vector(x,y))}};PhSim.prototype.pointInObject=function(o,x,y){return PhSim.Query.pointInObject(o,x,y)};PhSim.prototype.getDynObjectByID=function(idNum){var a=this.getUniversalObjArray();for(var i=0;i<a.length;i++){if(a[i].id===idNum){return a[i]}}};PhSim.prototype.pointObjArray=function(x,y){var b=[];var a=this.objUniverse||[];for(var i=0;i<a.length;i++){if(this.pointInObject(a[i],x,y)){b.push(a[i])}}return b};PhSim.prototype.getCollisionList=function(dynObject){var a=[];this.matterJSEngine.pairs.list.forEach((function(c){if(c.bodyA.plugin.dynObject===dynObject||c.bodyB.plugin.dynObject===dynObject){var p=new PhSim.Events.PhSimCollision;p.bodyA=c.bodyA.plugin.dynObject;p.bodyB=c.bodyA.plugin.dynObject;p.matter=c;a.push(p)}}));return a};PhSim.prototype.getCollidingMatterBodies=function(body){var a=[];for(var i=0;i<this.matterJSEngine.pairs.list.length;i++){var o=this.matterJSEngine.pairs.list[i];if(o.bodyA===body){a.push(o.bodyB)}if(o.bodyB===body){a.push(o.bodyA)}}return a};PhSim.prototype.getCollidingObjects=function(dynObject){var a=this.getCollisionList(dynObject);var b=[];for(var i=0;i<a.length;i++){if(a[i].matter.bodyA.plugin.id===dynObject.id){b.push(a[i].bodyB)}if(a[i].matter.bodyB.plugin.id===dynObject.id){b.push(a[i].bodyA)}}return b};PhSim.Query.getSensorClasses=function(dynObject){if(dynObject.sensorClass){var a=dynObject.sensorClass;var b=a.split(" ");return b}else{return[]}};PhSim.Query.sameSensorClasses=function(dynObjectA,dynObjectB){return PhSim.Query.intersectionExists(PhSim.Query.getSensorClasses(dynObjectA),PhSim.Query.getSensorClasses(dynObjectB))};PhSim.Query.intersectionExists=function(array1,array2){for(var i=0;i<array1.length;i++){var a=array2.indexOf(array1[i]);if(a!==-1){return true}}return false};PhSim.Query.getCollidingSensorObjects=function(phSim,dynObject){var a=phSim.getCollisionList(dynObject);var b=[];for(var i=0;i<a.length;i++){var dynCol=a[i];var matterCol=dynCol.matter;if(matterCol.bodyA.plugin.dynObject.id===dynObject.id&&PhSim.Query.sameSensorClasses(dynObject,dynCol.bodyB)){b.push(dynCol.bodyB)}if(matterCol.bodyB.plugin.dynObject.id===dynObject.id&&PhSim.Query.sameSensorClasses(dynObject,dynCol.bodyA)){b.push(dynCol.bodyA)}}return b};PhSim.prototype.getCollidingSensorObjects=function(dynObject){var a=this.getCollisionList(dynObject);var b=[];for(var i=0;i<a.length;i++){var dynCol=a[i];var matterCol=dynCol.matter;if(matterCol.bodyA.plugin.dynObject.id===dynObject.id&&PhSim.Query.sameSensorClasses(dynObject,dynCol.bodyB)){b.push(dynCol.bodyB)}if(matterCol.bodyB.plugin.dynObject.id===dynObject.id&&PhSim.Query.sameSensorClasses(dynObject,dynCol.bodyA)){b.push(dynCol.bodyA)}}return b};PhSim.prototype.inSensorCollision=function(dynObject){var a=this.getCollidingSensorObjects(dynObject);if(a.length>0){return true}else{return false}};PhSim.Query.isPointInRawRectangle=function(cx,cy,cw,ch,px,py){var cond=cx<px&&px<cx+cw&&cy<py&&py<cy+ch;if(cond){return true}else{return false}};PhSim.prototype.getCollisionChecker=function(dynObjectA,dynObjectB){var self=this;var report=new PhSim.CollisionReport;report.before=null;report.current=null;report.difference=null;report.objectA=dynObjectA;report.objectB=dynObjectB;this.on("beforeupdate",(function(){report.before=self.collided(dynObjectA,dynObjectB)}));this.on("afterupdate",(function(){report.current=self.collided(dynObjectA,dynObjectB);report.difference=report.current-report.before;if(report.difference){var eventObj=new PhSim.Events.PhSimDynEvent;eventObj.report=report;eventObj.difference=report.difference;self.callEventClass("collisionchange",self,eventObj)}}));return report}},function(module,exports,__webpack_require__){const PhSim=__webpack_require__(0);PhSim.prototype.applyGravitationalField=function(){var a=this.objUniverse;for(var i=0;i<a.length;i++){for(var j=0;j<a.length;j++){if(i!==j&&!this.isNonDyn(a[i])&&!this.isNonDyn(a[j])&&!a[i].matter.isStatic&&!a[j].matter.isStatic){var a1=PhSim.Vector.scale(PhSim.Vector.subtract(a[j].matter.position,a[i].matter.position),6.67*Math.pow(10,-11)*a[i].matter.mass*a[j].matter.mass*-1);var b1=Math.pow(PhSim.Vector.distance(a[j].matter.position,a[i].matter.position),3);var c=PhSim.Vector.divide(a1,b1);PhSim.Motion.applyForce(a[j],a[i].matter.position,c)}}}}},function(module,exports,__webpack_require__){const PhSim=__webpack_require__(0);PhSim.prototype.play=function(){var self=this;return new Promise((function(resolve){self.paused=false;self.intervalLoop=setInterval(self.loopFunction.bind(self),self.delta);resolve(self)}))};PhSim.prototype.pause=function(){var self=this;return new Promise((function(resolve){clearInterval(self.intervalLoop);self.paused=true;resolve(self)}))};PhSim.prototype.toggle=function(){var self=this;return new Promise((function(resolve,reject){if(self.paused){self.play().then((function(phsim){resolve(phsim)})).catch((function(e){reject(e)}))}else{self.pause().then((function(phsim){resolve(phsim)})).catch((function(e){reject(e)}))}}))};PhSim.prototype.exitSl=function(){var self=this;return new Promise((function(resolve){self.callEventClass("beforeslchange",self,new PhSim.Events.PhSimEvent("beforeslchange"));self.paused=false;clearInterval(self.intervalLoop);resolve(self)}))};PhSim.prototype.exit=function(){var self=this;return new Promise((function(resolve){delete self.camera.dynSim;delete self.phRender.dynSim;for(var i=0;i<self.objUniverse.length;i++){delete self.objUniverse[i].phSim}self.callEventClass("exit",self,new PhSim.Events.PhSimEvent("exit"));self.deregisterCanvasEvents();self.deregisterKeyEvents();self.exitSl();Object.assign(self,new PhSim);resolve(self)}))}},function(module,exports,__webpack_require__){const DynObject=__webpack_require__(2);const PhSim=__webpack_require__(0);var Matter;if(typeof window==="object"){Matter=window.Matter}else{Matter=__webpack_require__(1)}var gotoSimulationIndex=function(i){var self=this;return new Promise((function(resolve){self.status=PhSim.statusCodes.INT;var optionMap=new Map;self.firstSlUpdate=false;var event=new PhSim.Events.PhSimEvent("slchange");event.type="slchange";self.callEventClass("beforeslchange",self,event);if(!self.noCamera){self.camera.translate(-self.camera.x,-self.camera.y)}if(self.ctx){self.drawLoadingScreen()}self.simulation=self.simulations[i];self.simOptions=self.simulations[i];self.simulationIndex=i;if(self.ctx){self.width=self.ctx.canvas.width;self.height=self.ctx.canvas.height}self.paused=false;self.matterJSWorld=Matter.World.create();self.matterJSEngine=Matter.Engine.create({world:self.matterJSWorld});self.dynTree=[];self.objUniverse=[];self.staticSprites=[];self.spriteUrls=new Set;self.staticAudio=[];self.audioPlayers=0;self.simulationEventStack=new PhSim.EventStack;if(self.sprites){self.staticSprites.concat(self.sprites)}if(self.simOptions&&self.simOptions.world&&self.simOptions.world.bg){self.bgFillStyle=self.simOptions.world.bg}if(self.world&&self.world&&self.world.bg){self.bgFillStyle=self.world.bg}if(self.simulations){for(let i=0;i<self.simOptions.layers.length;i++){self.dynTree.push([]);for(let j=0;j<self.simOptions.layers[i].objUniverse.length;j++){var o=self.simOptions.layers[i].objUniverse[j];if(o.sprite){self.staticSprites.push(o.sprite);self.spriteUrls.add(o.sprite.src)}if(o instanceof DynObject&&!o.noDyn){self.addObject(o,{layer:i})}else{var dynObject=new DynObject(o);self.addObject(dynObject,{layer:i});optionMap.set(o,dynObject)}}var phSimDynEvent=new PhSim.Events.PhSimDynEvent;self.callEventClass("matterJSLoad",self,phSimDynEvent)}}Matter.Events.on(self.matterJSEngine,"collisionStart",(function(event){var a=new PhSim.Events.PhSimDynEvent;a.matterEvent=event;self.callEventClass("collisionstart",self,a)}));if(self.simOptions.game){self.lclGame=new PhSim.Game(self,self.simOptions.game)}if(self.simulation.widgets){for(var C=0;C<self.simulation.widgets.length;C++){var widget=self.simulation.widgets[C];if(widget.type==="setImgSrc"){this.spriteUrls.add(widget.src)}self.extractWidget(self,widget)}}self.status=PhSim.statusCodes.LOADED_DYN_OBJECTS;resolve()})).then((function(){return new Promise((function(resolve){if(self.phRender&&self.staticSprites.length){self.phRender.spriteImgObj=new PhSim.Sprites.spriteImgObj(Array.from(self.spriteUrls.values()),(function(){self.status=PhSim.statusCodes.LOADED_SPRITES;resolve()}))}else{self.status=PhSim.statusCodes.LOADED_SPRITES;resolve()}}))})).then((function(){return new Promise((function(resolve){if(self.staticAudio.length){self.audioArray=new PhSim.Audio.AudioArray(self.staticAudio,(function(){self.status=PhSim.statusCodes.LOADED_AUDIO;resolve()}))}else{self.status=PhSim.statusCodes.LOADED_AUDIO;resolve()}}))})).then((function(){self.init=true;self.status=PhSim.statusCodes.LOADED_SIMULATION;var e=new PhSim.Events.PhSimDynEvent;self.callEventClass("load",self,e)})).catch((function(e){self.callEventClass("error",self,e);throw e}))};module.exports=gotoSimulationIndex},function(module,exports,__webpack_require__){const PhSim=__webpack_require__(0);var Matter;if(typeof window==="object"){Matter=window.Matter}else{Matter=__webpack_require__(1)}PhSim.prototype.assignPhRender=function(phRender){this.phRender=phRender;this.phRender.sim=this.sim;this.phRender.dynSim=this;return phRender};PhSim.prototype.setRadius=function(dynObject,radius){var ratio=radius/dynObject.radius;if(dynObject.shape==="regPolygon"||dynObject.shape==="circle"){Matter.Body.scale(dynObject.object,ratio,ratio)}}},function(module,exports,__webpack_require__){const PhSim=__webpack_require__(0);var Matter;if(typeof window==="object"){Matter=window.Matter}else{Matter=__webpack_require__(1)}PhSim.prototype.updateDynObj=function(currentObj){if(currentObj.noDyn){this.phRender.renderStatic(currentObj)}else{if(currentObj.shape==="circle"||currentObj.shape==="regPolygon"||currentObj.shape==="rectangle"){currentObj.cycle=currentObj.firstCycle+currentObj.matter.angle}if(currentObj.shape==="rectangle"){currentObj.x=currentObj.matter.position.x-currentObj.w*.5;currentObj.y=currentObj.matter.position.y-currentObj.h*.5}if(currentObj.shape==="circle"||currentObj.shape==="regPolygon"){currentObj.x=currentObj.matter.position.x;currentObj.y=currentObj.matter.position.y}if(currentObj.shape==="polygon"){PhSim.calc_skinmesh(currentObj)}if(this.phRender){this.phRender.dynamicRenderDraw(currentObj)}}var event=new PhSim.Events.PhSimEvent("objupdate");event.target=currentObj;this.callEventClass("objupdate",this,event)};PhSim.prototype.loopFunction=function(){if(this.paused===false&&this.status===PhSim.statusCodes.LOADED_SIMULATION){var beforeUpdateEvent=new PhSim.Events.PhSimDynEvent;beforeUpdateEvent.simulation=this.simulation;this.prevDate=this.prevDate&&this.updateDate;this.callEventClass("beforeupdate",this,beforeUpdateEvent);if(!this.firstSlUpdate){this.callEventClass("beforefirstslupdate",this,afterUpdateEvent)}this.updateDate=new Date;if(this.prevDate){this.updateTimeInterval=this.updateDate-this.prevDate}Matter.Engine.update(this.matterJSEngine,this.delta);if(this.ctx){this.ctx.fillStyle=this.bgFillStyle;if(this.noCamera){this.ctx.fillRect(0,0,this.width,this.height)}else{this.ctx.fillRect(0-this.camera.x,0-this.camera.y,this.width/this.camera.scale,this.height/this.camera.scale)}}for(let i=0;i<this.objUniverse.length;i++){this.updateDynObj(this.objUniverse[i])}this.applyGravitationalField();var afterUpdateEvent=new PhSim.Events.PhSimDynEvent;afterUpdateEvent.simulation=this.simulation;this.sl_time=this.sl_time+this.delta;if(this.filter){this.ctx.fillStyle="rgba(3,3,3,0.7)";this.ctx.fillRect(0,0,this.width/this.camera.scale,this.height/this.camera.scale)}if(!this.firstSlUpdate){this.callEventClass("firstslupdate",this,afterUpdateEvent);this.firstSlUpdate=true}this.callEventClass("afterupdate",this,afterUpdateEvent)}}},function(module,exports,__webpack_require__){const PhSim=__webpack_require__(0);PhSim.prototype.extractWidget=function(dyn_object,widget){if(PhSim.Widgets[widget.type]){PhSim.Widgets[widget.type].call(this,dyn_object,widget)}if(widget.name){this.widgets[widget.name]=widget}var self=this;if(widget.changeSl){var closure=function(){var i=widget.slIndex;var f=function(){self.gotoSimulationIndex(i)};return f};this.createWFunction(widget.trigger,closure(),{...widget,wFunctionObj:dyn_object})}if(widget.transformWithCamera){this.camera.transformingObjects.push(dyn_object)}};PhSim.prototype.extractWidgets=function(dyn_object){for(var i=0;i<dyn_object.widgets.length;i++){this.extractWidget(dyn_object,dyn_object.widgets[i])}}},function(module,exports,__webpack_require__){const Vector=__webpack_require__(3);const Motion=__webpack_require__(4);var Camera=function(dynSim){this.dynSim=dynSim};Camera.prototype.scale=1;Camera.prototype.x=0;Camera.prototype.y=0;Camera.prototype.targetObj=null;Camera.prototype.transformingObjects=[];Camera.prototype.zoomIn=function(scaleFactor){this.scale=this.scale*scaleFactor;this.dynSim.ctx.scale(scaleFactor,scaleFactor)};Camera.prototype.translate=function(dx,dy){dx=dx||0;dy=dy||0;this.x=this.x+dx;this.y=this.y+dy;this.dynSim.ctx.translate(dx,dy);for(var i=0;i<this.transformingObjects.length;i++){Motion.translate(this.transformingObjects[i],new Vector(-dx,-dy))}};Camera.prototype.setPosition=function(x,y){this.dynSim.ctx.translate(-this.x,-this.y);this.x=x;this.y=y};module.exports=Camera},function(module,exports,__webpack_require__){const PhSim=__webpack_require__(0);var Matter;if(typeof window==="object"){Matter=window.Matter}else{Matter=__webpack_require__(1)}PhSim.Constraints={Static:{}};PhSim.Constraints.Static.Constraint=function(){this.objectA=null;this.objectB=null;this.pointA=null;this.pointB=null;this.type="constraint"};PhSim.prototype.getWidgetByName=function(nameStr){for(var i=0;i<this.objUniverse.length;i++){this.objUniverse[i].getWidgetByName(nameStr)}};PhSim.prototype.widgets={};PhSim.Widget=function(onextraction){this.onextraction=onextraction};PhSim.Widget.defineByBoolean=function(o){Object.keys(PhSim.Widgets).forEach((function(p){if(o[p]){o.type=p}}))};PhSim.Widget.WidgetOptions=function(type){this.type=type};PhSim.Widgets={};PhSim.Query.chkWidgetType=function(){};__webpack_require__(34);__webpack_require__(35);__webpack_require__(36);const Game=__webpack_require__(13);Object.assign(PhSim.Widgets,Game.Widgets);__webpack_require__(37);__webpack_require__(38);__webpack_require__(39);__webpack_require__(40);__webpack_require__(41);__webpack_require__(42);__webpack_require__(43);__webpack_require__(44);__webpack_require__(45);__webpack_require__(46);PhSim.Widgets.constraint=__webpack_require__(47);PhSim.Widgets.setImgSrc=__webpack_require__(48);PhSim.Widgets.transformAgainstCamera=__webpack_require__(49);PhSim.Widgets.playAudio=function(dyn_object,widget){var self=this;var i=this.audioPlayers;this.staticAudio.push(widget);var f=function(){self.playAudioByIndex(i)};this.createWFunction(dyn_object,f,widget);this.audioPlayers++};PhSim.Widgets.noRotation=function(dyn_object){Matter.Body.setInertia(dyn_object.matter,Infinity)}},function(module,exports,__webpack_require__){var Matter;if(typeof window==="object"){Matter=window.Matter}else{Matter=__webpack_require__(1)}const PhSim=__webpack_require__(0);const Motion=__webpack_require__(4);PhSim.prototype.createCircularConstraint=function(dynObject,x,y){x=x||dynObject.matter.position.x;y=y||dynObject.matter.position.y;var c=Matter.Constraint.create({bodyA:dynObject.matter,pointB:{x:x,y:y}});Matter.World.add(this.matterJSWorld,c);var relAngle=Math.atan2(y-dynObject.matter.position.y,x-dynObject.matter.position.x);this.on("afterupdate",(function(){var newAngle=Math.atan2(y-dynObject.matter.position.y,x-dynObject.matter.position.x)-relAngle;Motion.setAngle(dynObject,newAngle)}));dynObject.circularConstraintVector={x:x,y:y}};PhSim.Widgets.circularConstraint=function(dyn_object,widget){this.createCircularConstraint(dyn_object,widget.x,widget.y)}},function(module,exports,__webpack_require__){const PhSim=__webpack_require__(0);PhSim.prototype.cloneObject=function(dynObject,options={}){var obj=new PhSim.DynObject(dynObject.static);obj.cloned=true;obj.cloneParent=dynObject;PhSim.Motion.setVelocity(obj,options.velocity);this.addToOverlayer(obj);var eventObj=new PhSim.Events.PhSimEvent("clone");eventObj.target=dynObject;eventObj.clonedObj=obj;this.callEventClass("clone",this,eventObj)};PhSim.Widgets.clone=function(dyn_object,widget){var self=this;var getFunction;var o={velocity:widget.vector};if(widget.trigger==="time"){getFunction=function(){var time=widget.time;var maxN=widget.maxN;var func=null;if(Number.isInteger(maxN)){func=function(){if(func.__n===maxN){clearInterval(func.__interN)}else{if(!self.paused){self.cloneObject(dyn_object,o);func.__n++}}};func.__n=0}else{func=function(){if(!self.paused){self.cloneObject(dyn_object,o)}}}func.__phtime=time;func.__interN=null;return func};var refFunc=getFunction();refFunc.__interN=setInterval(refFunc,refFunc.__phtime)}if(widget.trigger==="key"){getFunction=function(){var kc=widget.key;var cloneByKeyFunc=function(e){if(e.key===kc){self.cloneObject(dyn_object,o)}};return cloneByKeyFunc};this.on("keydown",getFunction())}}},function(module,exports,__webpack_require__){const Motion=__webpack_require__(4);const PhSim=__webpack_require__(0);var Matter;if(typeof window==="object"){Matter=window.Matter}else{Matter=__webpack_require__(1)}PhSim.Widgets.draggable=function(dyn_object){var self=this;var func=function(){var delta={};var mV={x:null,y:null};var __onmousemove=function(e){mV.x=e.x-delta.x;mV.y=e.y-delta.y};var __onmouseup=function(){self.off("mousemove",__onmousemove);self.off("mouseup",__onmouseup);self.off("beforeupdate",__onbeforeupdate)};var __onbeforeupdate=function(){Matter.Body.setVelocity(dyn_object.matter,{x:0,y:0});Motion.setPosition(dyn_object,mV)};var __onmousedown=function(e){if(self.pointInObject(dyn_object,e.x,e.y)){delta.x=e.x-dyn_object.matter.position.x;delta.y=e.y-dyn_object.matter.position.y;self.on("mousemove",__onmousemove);self.on("mouseup",__onmouseup);self.on("beforeupdate",__onbeforeupdate);__onmousemove(e)}};self.on("mouseout",__onmouseup);return __onmousedown};this.on("mousedown",func())}},function(module,exports,__webpack_require__){var Matter;if(typeof window==="object"){Matter=window.Matter}else{Matter=__webpack_require__(1)}const PhSim=__webpack_require__(0);PhSim.prototype.setLock=function(dynObject,value){dynObject.locked=value;Matter.Body.setStatic(dynObject.matter,value)};PhSim.prototype.toggleLock=function(dynObject){this.setLock(dynObject,!dynObject.locked)};PhSim.prototype.toggleSemiLock=function(dynObject){dynObject.locked=!dynObject.locked;Matter.Body.setStatic(dynObject.matter,dynObject.locked)};PhSim.Widgets.toggleLock=function(dyn_object,widget){var self=this;var closure=function(){var o=dyn_object;var f=function(){self.toggleLock(o)};return f};this.createWFunction(dyn_object,closure(),widget)};PhSim.Widgets.toggleSemiLock=function(dyn_object,widget){var self=this;var closure=function(){var o=dyn_object;var f=function(){self.toggleSemiLock(o)};return f};this.createWFunction(dyn_object,closure(),widget)}},function(module,exports,__webpack_require__){const Motion=__webpack_require__(4);const PhSim=__webpack_require__(0);PhSim.prototype.createMotionFunction=function(mode,dyn_object,motion){if(mode==="force"){return function(){return Motion.applyForce(dyn_object,dyn_object.matter.position,motion)}}if(mode==="velocity"){return function(){return Motion.setVelocity(dyn_object,motion)}}if(mode==="translate"){return function(){return Motion.translate(dyn_object,motion)}}if(mode==="position"){return function(){return Motion.setPosition(dyn_object,motion)}}if(mode==="rotation"){return function(){return Motion.rotate(dyn_object,motion,dyn_object.matter.position)}}if(mode==="circular_constraint_rotation"){return function(){return Motion.rotate(dyn_object,motion,dyn_object.circularConstraintVector)}}if(mode==="setAngle"){return function(){return Motion.setAngle(dyn_object,motion)}}if(mode==="circular_constraint_setAngle"){return function(){var a=Math.atan2(dyn_object.y-dyn_object.circularConstraintVector.y,dyn_object.x-dyn_object.circularConstraintVector.x);Motion.rotate(dyn_object,-a,dyn_object.circularConstraintVector);Motion.rotate(dyn_object,motion,dyn_object.circularConstraintVector)}}return console.error("Parameter 'mode' must either be equal to the one of the following strings: 'force','velocity' or 'position'.")};PhSim.Widgets.velocity=function(dynObject,widget){var f=this.createMotionFunction("velocity",dynObject,widget.vector);this.createWFunction(dynObject,f,widget)};PhSim.Widgets.translate=function(dynObject,widget){var f=this.createMotionFunction("translate",dynObject,widget.vector);this.createWFunction(dynObject,f,widget)};PhSim.Widgets.position=function(dynObject,widget){var f=this.createMotionFunction("position",dynObject,widget.vector);this.createWFunction(dynObject,f,widget)};PhSim.Widgets.rotation=function(dynObject,widget){var f;if(widget.circularConstraintRotation){f=this.createMotionFunction("circular_constraint_rotation",dynObject,widget.cycle)}else{f=this.createMotionFunction("rotation",dynObject,widget.cycle)}this.createWFunction(dynObject,f,widget)};PhSim.Widgets.setAngle=function(dynObject,widget){var f;if(widget.circularConstraintRotation){f=this.createMotionFunction("circular_constraint_setAngle",dynObject,widget.cycle)}else{f=this.createMotionFunction("setAngle",dynObject,widget.cycle)}this.createWFunction(dynObject,f,widget)};PhSim.Widgets.force=function(dyn_object,widget){var f=this.createMotionFunction("force",dyn_object,widget.vector);this.createWFunction(dyn_object,f,widget)}},function(module,exports,__webpack_require__){const DynObject=__webpack_require__(2);const PhSim=__webpack_require__(0);PhSim.prototype.callObjLinkFunctions=function(dynObject){for(var i=0;i<dynObject.objLinkFunctions.length;i++){dynObject.objLinkFunctions[i]()}};PhSim.Widgets.objLink=function(dyn_object,widget){var self=this;var targetObj;var widgetO=widget;this.on("load",(function(){if(typeof widget.target.L==="number"&&typeof widget.target.O==="number"){targetObj=self.LO(widgetO.target.L,widgetO.target.O)}else if(widget.target instanceof DynObject){targetObj=widget.target}var eventFunc=function(){self.callObjLinkFunctions(targetObj)};self.createWFunction(dyn_object,eventFunc,widget)}),{slEvent:true})}},function(module,exports,__webpack_require__){const{statusCodes:statusCodes}=__webpack_require__(0);const PhSim=__webpack_require__(0);PhSim.prototype.wFunctions=[];PhSim.prototype.wFunctionRefs=[];PhSim.prototype.createWFunction=function(thisRef,wFunctionBody,options){var self=this;if(typeof wFunctionBody==="number"){wFunctionBody=this.wFunctions[wFunctionBody]}if(typeof wFunctionBody==="string"){wFunctionBody=new Function("e",options.function)}var wFunction=function(event){try{return wFunctionBody.apply(thisRef,event)}catch(e){self.callEventClass("wfunctionerror",self,e);console.error(e)}};wFunction._options=options;wFunction._bodyFunction=wFunctionBody;wFunction._thisRef=thisRef;if(options._name){self.wFunctionNames[options._name]=wFunction}if(options.trigger==="key"){if(options.key){wFunction._ref=function(e){if(e.key.match(new RegExp("^"+options.key+"$","i"))){wFunction(e)}}}else{wFunction._ref=function(e){wFunction(e)}}wFunction._eventclass="keydown"}else if(options.trigger==="sensor"||options.trigger==="sensor_global"){if(options.trigger==="sensor"){wFunction._ref=function(e){var m=self.inSensorCollision(thisRef);if(m){wFunction(e)}}}else{wFunction._ref=function(e){wFunction(e)}}wFunction._eventclass="collisionstart"}else if(options.trigger==="update"){wFunction._ref=function(){wFunction()};wFunction._eventclass="beforeupdate"}else if(options.trigger==="objclick"||options.trigger==="objclick_global"){var f;if(options.trigger==="objclick"){wFunction._ref=function(e){if(self.objMouseArr[self.objMouseArr.length-1]===thisRef){wFunction(e)}}}else{wFunction._ref=function(e){wFunction(e)}}wFunction._eventclass="objclick"}else if(options.trigger==="objmousedown"||options.trigger==="objmousedown_global"){if(options.trigger==="objmousedown"){wFunction._ref=function(e){if(self.objMouseArr[self.objMouseArr.length-1]===thisRef){wFunction(e)}}}else{wFunction._ref=function(e){wFunction(e)}}wFunction._eventclass="objmousedown"}else if(options.trigger==="firstslupdate"){wFunction._ref=function(e){wFunction(e)};wFunction._eventclass="firstslupdate"}else if(options.trigger==="objmouseup"||options.trigger==="objmouseup_global"){if(options.trigger==="objmouseup"){wFunction._ref=function(e){if(self.objMouseArr[self.objMouseArr.length-1]===thisRef){wFunction(e)}}}else{wFunction._ref=function(e){wFunction(e)}}wFunction._eventclass="objmouseup"}else if(options.trigger==="objlink"){thisRef.objLinkFunctions=thisRef.objLinkFunctions||[];thisRef.objLinkFunctions.push(wFunction);wFunction._ref=f;return wFunction}else if(options.trigger==="afterslchange"){wFunction._ref=function(e){wFunction(e)};wFunction._eventclass="afterslchange"}else if(options.trigger==="time"){var getFunction=function(){var fn;if(Number.isInteger(options.maxN)){fn=function(){if(fn.__n===options.maxN){clearInterval(fn.__interN)}else{if(!self.paused){wFunction();fn.__n++}}};fn.__n=0}else{fn=function(){if(!self.paused){wFunction()}}}fn.__phtime=options.time;fn.__interN=null;return fn};var refFunc=getFunction();if(this.status===statusCodes.LOADED_SIMULATION){refFunc.__interN=setInterval(refFunc,refFunc.__phtime)}else if(this.status<statusCodes.LOADED_SIMULATION){self.on("firstslupdate",(function(){refFunc.__interN=setInterval(refFunc,refFunc.__phtime)}))}wFunction._ref=refFunc.__interN;return wFunction}else{wFunction._ref=wFunction;wFunction._eventclass=options.trigger}if(typeof wFunction._ref==="function"){wFunction._ref._wFunction=wFunction}if(typeof wFunction._eventclass==="string"){wFunction._listener=wFunction._ref;self.on(wFunction._eventclass,wFunction._ref,{slEvent:true})}return wFunction};PhSim.prototype.disableWFunction=function(o){if(typeof o._eventclass==="string"){this.off(o._eventclass,o._ref)}else if(o._options.trigger==="time"){clearInterval(o._ref)}else if(o._options.trigger==="objlink"){var i=o._thisRef.objLinkFunctions.indexOf(o);o._thisRef.objLinkFunctions.splice(i,1)}if(o._name){delete this.wFunctionNames[o._name]}};PhSim.Widgets.wFunction=function(o,widget){this.createWFunction(o,widget.function,widget)};PhSim.prototype.wFunctionNames={}},function(module,exports,__webpack_require__){const Motion=__webpack_require__(4);const Vector=__webpack_require__(3);const PhSim=__webpack_require__(0);var Matter;if(typeof window==="object"){Matter=window.Matter}else{Matter=__webpack_require__(1)}PhSim.Widgets.elevator=function(dyn_object,widget){var func=function(){var bounding=widget.bounding;var obj=dyn_object;var relVec=Vector.subtract(widget.pointB,widget.pointA);var u=Vector.unitVector(relVec);var ax;var ay;var bx;var by;var reversable=true;var cond_f=function(){};if(bounding==="x"){if(widget.pointA.x<widget.pointB.x){ax=widget.pointA.x;bx=widget.pointB.x}if(widget.pointB.x<widget.pointA.x){ax=widget.pointB.x;bx=widget.pointA.x}cond_f=function(){return ax<=obj.matter.position.x&&obj.matter.position.x<=bx}}if(bounding==="y"){if(widget.pointA.y<widget.pointB.y){ay=widget.pointA.y;by=widget.pointB.y}if(widget.pointB.y<widget.pointA.y){ay=widget.pointB.y;by=widget.pointA.y}cond_f=function(){return ay<=obj.matter.position.y&&obj.matter.position.y<=by}}Matter.Body.setStatic(dyn_object.matter,true);var inRange=function(){if(cond_f()){Motion.translate(obj,Vector.scale(u,1));reversable=true}else{if(reversable){u={x:-u.x,y:-u.y};reversable=false}else{Motion.translate(obj,Vector.scale(u,1))}}};return inRange};this.on("afterupdate",func())}},function(module,exports,__webpack_require__){const PhSim=__webpack_require__(0);var Matter;if(typeof window==="object"){Matter=window.Matter}else{Matter=__webpack_require__(1)}PhSim.prototype.addKeyboardControls=function(dynObj,keyboardControls){var f=function(event){if(event.code=="ArrowRight"){Matter.Body.setVelocity(dynObj.matter,{x:keyboardControls.right,y:0})}if(event.code=="ArrowUp"){Matter.Body.setVelocity(dynObj.matter,{x:0,y:-keyboardControls.up})}if(event.code=="ArrowLeft"){Matter.Body.setVelocity(dynObj.matter,{x:-keyboardControls.left,y:0})}if(event.code=="ArrowDown"){Matter.Body.setVelocity(dynObj.matter,{x:0,y:keyboardControls.down})}};this.on("keydown",f,{slEvent:true});4};PhSim.Widgets.keyboardControls=function(dyn_object,widget){this.addKeyboardControls(dyn_object,widget)}},function(module,exports,__webpack_require__){const PhSim=__webpack_require__(0);PhSim.Widgets.transformCameraByObj=function(dyn_object){var self=this;var dx;var dy;this.on("beforeupdate",(function(){dx=dyn_object.matter.position.x;dy=dyn_object.matter.position.y}),{slEvent:true});this.on("afterupdate",(function(){dx=dyn_object.matter.position.x-dx;dy=dyn_object.matter.position.y-dy;self.camera.translate(-dx,-dy)}),{slEvent:true})}},function(module,exports,__webpack_require__){const PhSim=__webpack_require__(0);PhSim.Widgets.setColor=function(dyn_object,widget){var f=function(){PhSim.DynObject.setColor(dyn_object,widget.color)};this.createWFunction(dyn_object,f,widget)};PhSim.Widgets.setBorderColor=function(dyn_object,widget){var closure=function(){var color=widget.color;var obj=dyn_object;var f=function(){PhSim.DynObject.setBorderColor(obj,color)};return f};this.createWFunction(dyn_object,closure(),widget)};PhSim.Widgets.setLineWidth=function(dyn_object,widget){var f=function(){PhSim.DynObject.setLineWidth(dyn_object,widget.width)};this.createWFunction(dyn_object,f,widget)}},function(module,exports,__webpack_require__){const PhSim=__webpack_require__(0);PhSim.Widgets.deleteSelf=function(dyn_object,widget){var self=this;var ref;var f=function(){self.removeDynObj(dyn_object);self.disableWFunction(ref)};ref=this.createWFunction(dyn_object,f,widget)}},function(module,exports,__webpack_require__){const PhSim=__webpack_require__(0);PhSim.Widgets.stack=function(o,w){var a=[];for(let i=1;i<=w.rows;i++){let new_o=this.cloneObject(o);PhSim.Motion.transform(new_o,{x:w.rowDist*i,y:0});a.push(new_o)}for(let i=1;i<=w.columns;i++){let new_o=this.cloneObject(o);PhSim.Motion.transform(new_o,{x:0,y:w.colDist*i});a.push(new_o)}}},function(module,exports,__webpack_require__){const Vector=__webpack_require__(3);const DynObject=__webpack_require__(2);var Matter;if(typeof window==="object"){Matter=window.Matter}else{Matter=__webpack_require__(1)}function constraint(phsim,widget){var position="absolute";if(widget.position==="relative"){position="relative"}else if(widget.position==="absolute"){position="absolute"}var b={};if(position==="absolute"){if(widget.objectA){if(widget.objectA instanceof DynObject){b.bodyA=widget.objectA.matter}else{if(typeof widget.objectA.L==="number"&&typeof widget.objectA.O==="number"){b.bodyA=phsim.LO(widget.objectA.L,widget.objectA.O).matter}else{b.bodyA=phsim.optionMap.get(widget.objectA).matter}}}if(widget.objectB){b.bodyB=phsim.LO(widget.objectB.L,widget.objectB.O).matter;if(widget.objectB instanceof DynObject){b.bodyB=widget.objectB.matter}else{if(typeof widget.objectB.L==="number"&&typeof widget.objectB.O==="number"){b.bodyB=phsim.LO(widget.objectB.L,widget.objectB.O).matter}else{b.bodyB=phsim.optionMap.get(widget.objectB).matter}}}if(widget.pointA){if(widget.objectA){b.pointA=Vector.subtract(widget.pointA,b.bodyA.position)}else{b.pointA=widget.pointA}}if(widget.pointB){if(widget.objectB){b.pointB=Vector.subtract(widget.pointB,b.bodyB.position)}else{b.pointB=widget.pointB}}}if(position==="relative"){b.pointA=widget.pointA;b.pointB=widget.pointB;b.bodyA=widget.objectA.plugin.dynObject;b.bodyB=widget.objectB.plugin.dynObject}var c=Matter.Constraint.create(b);Matter.World.add(phsim.matterJSWorld,c)}module.exports=constraint},function(module,exports){function setImgSrc(dynObject,widget){var f=function(){dynObject.sprite.src=widget.src};this.createWFunction(dynObject,f,widget)}module.exports=setImgSrc},function(module,exports){function transformAgainstCamera(o){this.camera.transformingObjects.push(o)}module.exports=transformAgainstCamera},function(module,exports,__webpack_require__){var Matter;if(typeof window==="object"){Matter=window.Matter}else{Matter=__webpack_require__(1)}var calc_skinmesh=function(dynObject){dynObject.transformVector={x:dynObject.matter.position.x-dynObject.matter.positionPrev.x,y:dynObject.matter.position.y-dynObject.matter.positionPrev.y};var transformAngle=dynObject.matter.angle-dynObject.matter.anglePrev;Matter.Vertices.translate(dynObject.skinmesh,Matter.Vertices.centre(dynObject.skinmesh),-1);Matter.Vertices.rotate(dynObject.skinmesh,transformAngle,{x:0,y:0});Matter.Vertices.translate(dynObject.skinmesh,dynObject.matter.position,1);dynObject.verts=dynObject.skinmesh;dynObject.verts=dynObject.skinmesh};module.exports=calc_skinmesh},function(module,exports){},function(module,exports,__webpack_require__){const PhSim=__webpack_require__(0);PhSim.prototype.vars={};PhSim.prototype.magicWords={};PhSim.MagicWords={__test1:function(){return"4"},__game__score:function(){return this.lclGame&&this.lclGame.score},__game__life:function(){return this.lclGame&&this.lclGame.life},__game__goal:function(){return this.lclGame&&this.lclGame.goal},__game__int_life:function(){return this.lclGame&&this.lclGame.intLife},__game__int_score:function(){return this.lclGame&&this.lclGame.intScore}};PhSim.addGlobalMagicalWord=function(name,call){if(PhSim.MagicWords[name]){throw"Magical word "+name+" already exists."}else{PhSim.MagicWords[name]=call}};PhSim.prototype.addLocalMagicalWord=function(name,call){if(this.magicWords[name]){throw"Magical word "+name+" already exists."}else{this.magicWords[name]=call}};PhSim.prototype.processVar=function(str){var magicWordKeys=Object.keys(PhSim.MagicWords);for(let i=0;i<magicWordKeys.length;i++){let magicWord=magicWordKeys[i];let mgkWordRegex=new RegExp("{"+magicWord+"}","g");if(str.search(mgkWordRegex)!==-1){str=str.replace(mgkWordRegex,PhSim.MagicWords[magicWord].call(this))}}let a=Object.keys(this.vars);for(let i=0;i<a.length;i++){let v="\\$\\{"+a[i]+"\\}";let regex=new RegExp(v,"g");let s=str.search(regex);if(s!==-1){str=str.replace(regex,this.vars[a[i]])}}return str}},function(module,exports,__webpack_require__){const PhSim=__webpack_require__(0);const ObjLoops={};ObjLoops.global=function(sim,method){if(sim instanceof PhSim){for(let i=0;i<sim.objUniverse.length;i++){method(sim.objUniverse[i])}}else{for(let i=0;i<sim.simulations.length;i++){for(let j=0;j<sim.simulations[i].layers.length;j++){for(let k=0;k<sim.simulations[i].layers[j].objUniverse.length;k++){method(sim.simulations[i].layers[j].objUniverse[k])}}}}};ObjLoops.simulation=function(simulation,method){for(let j=0;j<simulation.layers.length;j++){for(let k=0;k<simulation.layers[j].objUniverse.length;k++){method(simulation.layers[j].objUniverse[k])}}};ObjLoops.layer=function(layer,method){for(let k=0;k<layer.objUniverse.length;k++){method(layer.objUniverse[k])}};module.exports=ObjLoops}]);